/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
/*! Microsoft grants you the right to use these JavaScript and CSS files for the sole purpose of either: 
(i) interacting through your browser with the Microsoft website, subject to the website’s terms of use; 
or (ii) using the files as included with a Microsoft product subject to that product’s license terms. 
Microsoft reserves all other rights to the files not expressly granted by Microsoft, whether by implication, 
estoppel or otherwise. The notices and licenses below are for informational purposes only.
*/
/*!
 * JSHint, by JSHint Community.
 *
 * Licensed under the same slightly modified MIT license that JSLint is.
 * It stops evil-doers everywhere.
 *
 * JSHint is a derivative work of JSLint:
 *
 *   Copyright (c) 2002 Douglas Crockford  (www.JSLint.com)
 *
 *   Permission is hereby granted, free of charge, to any person obtaining
 *   a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation
 *   the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom
 *   the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included
 *   in all copies or substantial portions of the Software.
 *
 *   The Software shall be used for Good, not Evil.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 *   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 *   DEALINGS IN THE SOFTWARE.
 *
 * JSHint was forked from 2010-12-16 edition of JSLint.
 *
 */
/*! Microsoft grants you the right to use these JavaScript and CSS files for the sole purpose of either: 
(i) interacting through your browser with the Microsoft website, subject to the website’s terms of use; 
or (ii) using the files as included with a Microsoft product subject to that product’s license terms. 
Microsoft reserves all other rights to the files not expressly granted by Microsoft, whether by implication, 
estoppel or otherwise. The notices and licenses below are for informational purposes only.
*/
/*!
JS Beautifier
Copyright (c) 2009 - 2011, Einar Lielmanis

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/
function js_beautify(e,t){function n(e){for(e="undefined"==typeof e?!1:e;_.length&&(" "===_[_.length-1]||_[_.length-1]===L||_[_.length-1]===V||e&&("\n"===_[_.length-1]||"\r"===_[_.length-1]));)_.pop()}function i(e){return e.replace(/^\s\s*|\s\s*$/,"")}function r(){var e=$;$=!1,o(),$=e}function o(e){if(k.eat_next_space=!1,(!$||!d(k.mode))&&(e="undefined"==typeof e?!0:e,k.if_line=!1,n(),_.length)){"\n"===_[_.length-1]&&e||(U=!0,_.push("\n")),V&&_.push(V);for(var t=0;t<k.indentation_level;t+=1)_.push(L);k.var_line&&k.var_line_reindented&&_.push(L),k.case_body&&_.push(L)}}function s(){if("TK_COMMENT"===C)return o(!0);if(k.eat_next_space)return k.eat_next_space=!1,void 0;var e=" ";_.length&&(e=_[_.length-1])," "!==e&&"\n"!==e&&e!==L&&_.push(" ")}function a(){U=!1,k.eat_next_space=!1,_.push(E)}function u(){k.indentation_level+=1}function l(){_.length&&_[_.length-1]===L&&_.pop()}function c(e){k&&x.push(k),k={previous_mode:k?k.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:k?k.indentation_level+(k.case_body?1:0)+(k.var_line&&k.var_line_reindented?1:0):0,ternary_depth:0}}function d(e){return"[EXPRESSION]"===e||"[INDENTED-EXPRESSION]"===e}function h(e){return m(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function p(){if(W="DO_BLOCK"===k.mode,x.length>0){var e=k.mode;k=x.pop(),k.previous_mode=e}}function f(e,t){for(var n=0;n<e.length;n++)if(i(e[n])[0]!=t)return!1;return!0}function g(e){return m(e,["case","return","do","if","throw","else"])}function m(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function v(e){for(var t=I,n=b.charAt(t);m(n,N)&&n!=e;){if(t++,t>=J)return 0;n=b.charAt(t)}return n}function y(){if(F=0,I>=J)return["","TK_EOF"];H=!1;var e=b.charAt(I);I+=1;var t=$&&d(k.mode);if(t){for(var r=0;m(e,N);){if("\n"===e?(n(),_.push("\n"),U=!0,r=0):"	"===e?r+=4:"\r"===e||(r+=1),I>=J)return["","TK_EOF"];e=b.charAt(I),I+=1}if(-1===k.indentation_baseline&&(k.indentation_baseline=r),U){var s;for(s=0;s<k.indentation_level+1;s+=1)_.push(L);if(-1!==k.indentation_baseline)for(s=0;s<r-k.indentation_baseline;s++)_.push(" ")}}else{for(;m(e,N);){if("\n"===e&&(F+=K?K>=F?1:0:1),I>=J)return["","TK_EOF"];e=b.charAt(I),I+=1}if(q&&F>1)for(s=0;F>s;s+=1)o(0===s),U=!0;H=F>0}if(m(e,M)){if(J>I)for(;m(b.charAt(I),M)&&(e+=b.charAt(I),I+=1,I!==J););if(I!==J&&e.match(/^[0-9]+[Ee]$/)&&("-"===b.charAt(I)||"+"===b.charAt(I))){var a=b.charAt(I);I+=1;var u=y(I);return e+=a+u[0],[e,"TK_WORD"]}return"in"===e?[e,"TK_OPERATOR"]:(!H||"TK_OPERATOR"===C||"TK_EQUALS"===C||k.if_line||!q&&"var"===w||o(),[e,"TK_WORD"])}if("("===e||"["===e)return[e,"TK_START_EXPR"];if(")"===e||"]"===e)return[e,"TK_END_EXPR"];if("{"===e)return[e,"TK_START_BLOCK"];if("}"===e)return[e,"TK_END_BLOCK"];if(";"===e)return[e,"TK_SEMICOLON"];if("/"===e){var l="",c=!0;if("*"===b.charAt(I)){if(I+=1,J>I)for(;("*"!==b.charAt(I)||!b.charAt(I+1)||"/"!==b.charAt(I+1))&&J>I&&(e=b.charAt(I),l+=e,("\r"===e||"\n"===e)&&(c=!1),I+=1,!(I>=J)););return I+=2,c&&0==F?["/*"+l+"*/","TK_INLINE_COMMENT"]:["/*"+l+"*/","TK_BLOCK_COMMENT"]}if("/"===b.charAt(I)){for(l=e;"\r"!==b.charAt(I)&&"\n"!==b.charAt(I)&&(l+=b.charAt(I),I+=1,!(I>=J)););return I+=1,H&&o(),[l,"TK_COMMENT"]}}if("'"===e||'"'===e||"/"===e&&("TK_WORD"===C&&g(w)||")"===w&&m(k.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||"TK_COMMENT"===C||"TK_START_EXPR"===C||"TK_START_BLOCK"===C||"TK_END_BLOCK"===C||"TK_OPERATOR"===C||"TK_EQUALS"===C||"TK_EOF"===C||"TK_SEMICOLON"===C)){var h=e,p=!1,f=e;if(J>I)if("/"===h){for(var v=!1;p||v||b.charAt(I)!==h;)if(f+=b.charAt(I),p?p=!1:(p="\\"===b.charAt(I),"["===b.charAt(I)?v=!0:"]"===b.charAt(I)&&(v=!1)),I+=1,I>=J)return[f,"TK_STRING"]}else for(;p||b.charAt(I)!==h;)if(f+=b.charAt(I),p=p?!1:"\\"===b.charAt(I),I+=1,I>=J)return[f,"TK_STRING"];if(I+=1,f+=h,"/"===h)for(;J>I&&m(b.charAt(I),M);)f+=b.charAt(I),I+=1;return[f,"TK_STRING"]}if("#"===e){if(0===_.length&&"!"===b.charAt(I)){for(f=e;J>I&&"\n"!=e;)e=b.charAt(I),f+=e,I+=1;return _.push(i(f)+"\n"),o(),y()}var E="#";if(J>I&&m(b.charAt(I),D)){do e=b.charAt(I),E+=e,I+=1;while(J>I&&"#"!==e&&"="!==e);return"#"===e||("["===b.charAt(I)&&"]"===b.charAt(I+1)?(E+="[]",I+=2):"{"===b.charAt(I)&&"}"===b.charAt(I+1)&&(E+="{}",I+=2)),[E,"TK_WORD"]}}if("<"===e&&"<!--"===b.substring(I-1,I+3)){for(I+=3,e="<!--";"\n"!=b[I]&&J>I;)e+=b[I],I++;return k.in_html_comment=!0,[e,"TK_COMMENT"]}if("-"===e&&k.in_html_comment&&"-->"===b.substring(I-1,I+2))return k.in_html_comment=!1,I+=2,H&&o(),["-->","TK_COMMENT"];if(m(e,R)){for(;J>I&&m(e+b.charAt(I),R)&&(e+=b.charAt(I),I+=1,!(I>=J)););return"="===e?[e,"TK_EQUALS"]:[e,"TK_OPERATOR"]}return[e,"TK_UNKNOWN"]}var b,_,E,C,w,S,T,k,x,L,N,M,R,I,O,D,P,A,W,H,U,F,V="";t=t?t:{};var B;void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(B=t.braces_on_own_line?"expand":"collapse"),B=t.brace_style?t.brace_style:B?B:"collapse";var j=t.indent_size?t.indent_size:4,z=t.indent_char?t.indent_char:" ",q="undefined"==typeof t.preserve_newlines?!0:t.preserve_newlines,K="undefined"==typeof t.max_preserve_newlines?!1:t.max_preserve_newlines,G="undefined"===t.jslint_happy?!1:t.jslint_happy,$="undefined"==typeof t.keep_array_indentation?!1:t.keep_array_indentation,X="undefined"==typeof t.space_before_conditional?!0:t.space_before_conditional,Y="undefined"==typeof t.indent_case?!1:t.indent_case;U=!1;var J=e.length;for(L="";j>0;)L+=z,j-=1;for(;e&&(" "===e[0]||"	"===e[0]);)V+=e[0],e=e.substring(1);for(b=e,T="",C="TK_START_EXPR",w="",S="",_=[],W=!1,N="\n\r	 ".split(""),M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),D="0123456789".split(""),R="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",R+=" <%= <% %> <?= <? ?>",R=R.split(" "),O="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),x=[],c("BLOCK"),I=0;;){var Z=y(I);if(E=Z[0],A=Z[1],"TK_EOF"===A)break;switch(A){case"TK_START_EXPR":if("["===E){if("TK_WORD"===C||")"===w){m(w,O)&&s(),c("(EXPRESSION)"),a();break}"[EXPRESSION]"===k.mode||"[INDENTED-EXPRESSION]"===k.mode?"]"===S&&","===w?("[EXPRESSION]"===k.mode&&(k.mode="[INDENTED-EXPRESSION]",$||u()),c("[EXPRESSION]"),$||o()):"["===w?("[EXPRESSION]"===k.mode&&(k.mode="[INDENTED-EXPRESSION]",$||u()),c("[EXPRESSION]"),$||o()):c("[EXPRESSION]"):c("[EXPRESSION]")}else"for"===T?c("(FOR-EXPRESSION)"):m(T,["if","while"])?c("(COND-EXPRESSION)"):c("(EXPRESSION)");";"===w||"TK_START_BLOCK"===C?o():"TK_END_EXPR"===C||"TK_START_EXPR"===C||"TK_END_BLOCK"===C||"."===w?H&&o():"TK_WORD"!==C&&"TK_OPERATOR"!==C?s():"function"===T||"typeof"===T?G&&s():(m(w,O)||"catch"===w)&&X&&s(),a();break;case"TK_END_EXPR":if("]"===E)if($){if("}"===w){l(),a(),p();break}}else if("[INDENTED-EXPRESSION]"===k.mode&&"]"===w){p(),o(),a();break}p(),a();break;case"TK_START_BLOCK":if("do"===T?c("DO_BLOCK"):c("BLOCK"),"expand"==B||"expand-strict"==B){var Q=!1;"expand-strict"==B?(Q="}"==v(),Q||o(!0)):"TK_OPERATOR"!==C&&("="===w||g(w)&&"else"!==w?s():o(!0)),a(),Q||u()}else"TK_OPERATOR"!==C&&"TK_START_EXPR"!==C?"TK_START_BLOCK"===C?o():s():d(k.previous_mode)&&","===w&&("}"===S?s():o()),u(),a();break;case"TK_END_BLOCK":p(),"expand"==B||"expand-strict"==B?("{"!==w&&o(),a()):("TK_START_BLOCK"===C?U?l():n():d(k.mode)&&$?($=!1,o(),$=!0):o(),a());break;case"TK_WORD":if(W){s(),a(),s(),W=!1;break}if("function"===E&&(k.var_line&&(k.var_line_reindented=!0),(U||";"===w)&&"{"!==w&&"TK_BLOCK_COMMENT"!=C&&"TK_COMMENT"!=C)){F=U?F:0,q||(F=1);for(var et=0;2-F>et;et++)o(!1)}if("case"===E||"default"===E){":"===w||k.case_body?l():(Y||k.indentation_level--,o(),Y||k.indentation_level++),a(),k.in_case=!0,k.case_body=!1;break}P="NONE","TK_END_BLOCK"===C?m(E.toLowerCase(),["else","catch","finally"])?"expand"==B||"end-expand"==B||"expand-strict"==B?P="NEWLINE":(P="SPACE",s()):P="NEWLINE":"TK_SEMICOLON"!==C||"BLOCK"!==k.mode&&"DO_BLOCK"!==k.mode?"TK_SEMICOLON"===C&&h(k.mode)?P="SPACE":"TK_STRING"===C?P="NEWLINE":"TK_WORD"===C?("else"===w&&n(!0),P="SPACE"):"TK_START_BLOCK"===C?P="NEWLINE":"TK_END_EXPR"===C&&(s(),P="NEWLINE"):P="NEWLINE",m(E,O)&&")"!==w&&(P="else"==w?"SPACE":"NEWLINE","function"!==E||"get"!==w&&"set"!==w||(P="SPACE")),k.if_line&&"TK_END_EXPR"===C&&(k.if_line=!1),m(E.toLowerCase(),["else","catch","finally"])?"TK_END_BLOCK"!==C||"expand"==B||"end-expand"==B||"expand-strict"==B?o():(n(!0),s()):"NEWLINE"===P?("TK_START_EXPR"!==C&&"="!==w&&","!==w||"function"!==E)&&("function"===E&&"new"==w?s():g(w)?s():"TK_END_EXPR"!==C?"TK_START_EXPR"===C&&"var"===E||":"===w||("if"===E&&"else"===T&&"{"!==w?s():(k.var_line=!1,k.var_line_reindented=!1,o())):m(E,O)&&")"!=w&&(k.var_line=!1,k.var_line_reindented=!1,o())):d(k.mode)&&","===w&&"}"===S?o():"SPACE"===P&&s(),a(),T=E,"var"===E&&(k.var_line=!0,k.var_line_reindented=!1,k.var_line_tainted=!1),"if"===E&&(k.if_line=!0),"else"===E&&(k.if_line=!1);break;case"TK_SEMICOLON":a(),k.var_line=!1,k.var_line_reindented=!1,"OBJECT"==k.mode&&(k.mode="BLOCK");break;case"TK_STRING":"TK_END_EXPR"===C&&m(k.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])?s():"TK_STRING"==C||"TK_START_BLOCK"===C||"TK_END_BLOCK"===C||"TK_SEMICOLON"===C?o():"TK_WORD"===C&&s(),a();break;case"TK_EQUALS":k.var_line&&(k.var_line_tainted=!0),s(),a(),s();break;case"TK_OPERATOR":var tt=!0,nt=!0;if(k.var_line&&","===E&&h(k.mode)&&(k.var_line_tainted=!1),k.var_line&&","===E){if(k.var_line_tainted){a(),k.var_line_reindented=!0,k.var_line_tainted=!1,o();break}k.var_line_tainted=!1}if(g(w)){s(),a();break}if(":"===E&&k.in_case){Y&&(k.case_body=!0),a(),o(),k.in_case=!1;break}if("::"===E){a();break}if(","===E){k.var_line?k.var_line_tainted?(a(),o(),k.var_line_tainted=!1):(a(),s()):"TK_END_BLOCK"===C&&"(EXPRESSION)"!==k.mode?(a(),"OBJECT"===k.mode&&"}"===w?o():s()):"OBJECT"===k.mode?(a(),o()):(a(),s());break}m(E,["--","++","!"])||m(E,["-","+"])&&(m(C,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||m(w,O))?(tt=!1,nt=!1,";"===w&&h(k.mode)&&(tt=!0),"TK_WORD"===C&&m(w,O)&&(tt=!0),"BLOCK"!==k.mode||"{"!==w&&";"!==w||o()):"."===E?tt=!1:":"===E?0==k.ternary_depth?(k.mode="OBJECT",tt=!1):k.ternary_depth-=1:"?"===E&&(k.ternary_depth+=1),tt&&s(),a(),nt&&s();break;case"TK_BLOCK_COMMENT":var it=E.split(/\x0a|\x0d\x0a/);if(f(it.slice(1),"*"))for(o(),_.push(it[0]),et=1;et<it.length;et++)o(),_.push(" "),_.push(i(it[et]));else for(it.length>1?o():"TK_END_BLOCK"===C?o():s(),et=0;et<it.length;et++)_.push(it[et]),_.push("\n");"\n"!=v("\n")&&o();break;case"TK_INLINE_COMMENT":s(),a(),h(k.mode)?s():r();break;case"TK_COMMENT":H?o():s(),a(),"\n"!=v("\n")&&r();break;case"TK_UNKNOWN":g(w)&&s(),a()}S=w,C=A,w=E}var rt=V+_.join("").replace(/[\n ]+$/,"");return rt}var JSHINT=function(){"use strict";function e(){}function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e,n){var i;for(i in n)t(n,i)&&(e[i]=n[i])}function i(){ht.couch&&n(pt,At),ht.rhino&&n(pt,qt),ht.prototypejs&&n(pt,zt),ht.node&&n(pt,jt),ht.devel&&n(pt,Wt),ht.dojo&&n(pt,Ht),ht.browser&&n(pt,Pt),ht.nonstandard&&n(pt,Gt),ht.jquery&&n(pt,Vt),ht.mootools&&n(pt,Bt),ht.wsh&&n(pt,Xt),ht.esnext&&Ct(),ht.globalstrict&&ht.strict!==!1&&(ht.strict=!0)}function r(e,t,n){var i=Math.floor(100*(t/st.length));throw{name:"JSHintError",line:t,character:n,message:e+" ("+i+"% scanned).",raw:e}}function o(e,t,n,i){return JSHINT.undefs.push([e,t,n,i])}function s(e,t,n,i,o,s){var a,u,l;return t=t||ct,"(end)"===t.id&&(t=_t),u=t.line||0,a=t.from||0,l={id:"(error)",raw:e,evidence:st[u-1]||"",line:u,character:a,a:n,b:i,c:o,d:s},l.reason=e.supplant(l),JSHINT.errors.push(l),ht.passfail&&r("Stopping. ",u,a),wt+=1,wt>=ht.maxerr&&r("Too many errors.",u,a),l}function a(e,t,n,i,r,o,a){return s(e,{line:t,from:n},i,r,o,a)}function u(e,t,n,i,r,o){s(e,t,n,i,r,o)}function l(e,t,n,i,r,o,s){return u(e,{line:t,from:n},i,r,o,s)}function c(e,n){"hasOwnProperty"===e&&s("'hasOwnProperty' is a really bad name."),t(Q,e)&&!Q["(global)"]&&(Q[e]===!0?ht.latedef&&s("'{a}' was used before it was defined.",ct,e):ht.shadow||"exception"===n||s("'{a}' is already defined.",ct,e)),Q[e]=n,Q["(global)"]?(tt[e]=Q,t(nt,e)&&(ht.latedef&&s("'{a}' was used before it was defined.",ct,e),delete nt[e])):mt[e]=Q}function d(){var e,t,n,r,o,s=ct.value;switch(s){case"*/":u("Unbegun comment.");break;case"/*members":case"/*member":s="/*members",lt||(lt={}),t=lt;break;case"/*jshint":case"/*jslint":t=ht,n=Dt;break;case"/*global":t=pt;break;default:u("What?")}r=Yt.token();e:for(;;){for(;;){if("special"===r.type&&"*/"===r.value)break e;if("(endline)"!==r.id&&","!==r.id)break;r=Yt.token()}"(string)"!==r.type&&"(identifier)"!==r.type&&"/*members"!==s&&u("Bad option.",r),o=Yt.token(),":"===o.id?(o=Yt.token(),t===lt&&u("Expected '{a}' and instead saw '{b}'.",r,"*/",":"),"indent"!==r.value||"/*jshint"!==s&&"/*jslint"!==s?"maxerr"!==r.value||"/*jshint"!==s&&"/*jslint"!==s?"maxlen"!==r.value||"/*jshint"!==s&&"/*jslint"!==s?"validthis"===r.value?Q["(global)"]?u("Option 'validthis' can't be used in a global scope."):"true"===o.value||"false"===o.value?t[r.value]="true"===o.value:u("Bad option value.",o):"true"===o.value?t[r.value]=!0:"false"===o.value?t[r.value]=!1:u("Bad option value.",o):(e=+o.value,("number"!=typeof e||!isFinite(e)||0>=e||Math.floor(e)!==e)&&u("Expected a small integer and instead saw '{a}'.",o,o.value),t.maxlen=e):(e=+o.value,("number"!=typeof e||!isFinite(e)||0>=e||Math.floor(e)!==e)&&u("Expected a small integer and instead saw '{a}'.",o,o.value),t.maxerr=e):(e=+o.value,("number"!=typeof e||!isFinite(e)||0>=e||Math.floor(e)!==e)&&u("Expected a small integer and instead saw '{a}'.",o,o.value),t.white=!0,t.indent=e),r=Yt.token()):(("/*jshint"===s||"/*jslint"===s)&&u("Missing option value.",r),t[r.value]=!1,r=o)}n&&i()}function h(e){for(var t,n=e||0,i=0;n>=i;)t=at[i],t||(t=at[i]=Yt.token()),i+=1;return t}function p(e,t){switch(_t.id){case"(number)":"."===ct.id&&s("A dot following a number can be confused with a decimal point.",_t);break;case"-":("-"===ct.id||"--"===ct.id)&&s("Confusing minusses.");break;case"+":("+"===ct.id||"++"===ct.id)&&s("Confusing plusses.")}for(("(string)"===_t.type||_t.identifier)&&(Z=_t.value),e&&ct.id!==e&&(t?"(end)"===ct.id?s("Unmatched '{a}'.",t,t.id):s("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",ct,e,t.id,t.line,ct.value):("(identifier)"!==ct.type||ct.value!==e)&&s("Expected '{a}' and instead saw '{b}'.",ct,e,ct.value)),gt=_t,_t=ct;;){if(ct=at.shift()||Yt.token(),"(end)"===ct.id||"(error)"===ct.id)return;if("special"===ct.type)d();else if("(endline)"!==ct.id)break}}function f(e,t){var n,i=!1;if("(end)"===ct.id&&u("Unexpected early end of program.",_t),p(),t&&(Z="anonymous",Q["(verb)"]=_t.value),t===!0&&_t.fud)n=_t.fud();else{if(_t.nud)n=_t.nud();else{if("(number)"===ct.type&&"."===_t.id)return s("A leading decimal point can be confused with a dot: '.{a}'.",_t,ct.value),p(),_t;u("Expected an identifier and instead saw '{a}'.",_t,_t.id)}for(;e<ct.lbp;)i="Array"===_t.value,p(),i&&"("===_t.id&&")"===ct.id&&s("Use the array literal notation [].",_t),_t.led?n=_t.led(n):u("Expected an operator and instead saw '{a}'.",_t,_t.id)}return n}function g(e,t){e=e||_t,t=t||ct,ht.white&&e.character!==t.from&&e.line===t.line&&(e.from+=e.character-e.from,s("Unexpected space after '{a}'.",e,e.value))}function m(e,t){e=e||_t,t=t||ct,!ht.white||e.character===t.from&&e.line===t.line||s("Unexpected space before '{a}'.",t,t.value)}function v(e,t){e=e||_t,t=t||ct,ht.white&&!e.comment&&e.line===t.line&&g(e,t)}function y(e,t){ht.white&&(e=e||_t,t=t||ct,e.line===t.line&&e.character===t.from&&(e.from+=e.character-e.from,s("Missing space after '{a}'.",e,e.value)))}function b(e,t){e=e||_t,t=t||ct,ht.laxbreak||e.line===t.line?ht.white&&(e=e||_t,t=t||ct,e.character===t.from&&(e.from+=e.character-e.from,s("Missing space after '{a}'.",e,e.value))):s("Bad line breaking before '{a}'.",t,t.id)}function _(e){var t;ht.white&&"(end)"!==ct.id&&(t=rt+(e||0),ct.from!==t&&s("Expected '{a}' to have an indentation at {b} instead at {c}.",ct,ct.value,t,ct.from))}function E(e){e=e||_t,e.line!==ct.line&&s("Line breaking error '{a}'.",e,e.value)}function C(){_t.line!==ct.line?ht.laxcomma||(C.first&&(s("Comma warnings can be turned off with 'laxcomma'"),C.first=!1),s("Bad line breaking before '{a}'.",_t,ct.id)):!_t.comment&&_t.character!==ct.from&&ht.white&&(_t.from+=_t.character-_t.from,s("Unexpected space after '{a}'.",_t,_t.value)),p(","),y(_t,ct)}function w(e,t){var n=$t[e];return n&&"object"==typeof n||($t[e]=n={id:e,lbp:t,value:e}),n}function S(e){return w(e,0)}function T(e,t){var n=S(e);return n.identifier=n.reserved=!0,n.fud=t,n}function k(e,t){var n=T(e,t);return n.block=!0,n}function x(e){var t=e.id.charAt(0);return(t>="a"&&"z">=t||t>="A"&&"Z">=t)&&(e.identifier=e.reserved=!0),e}function L(e,t){var n=w(e,150);return x(n),n.nud="function"==typeof t?t:function(){return this.right=f(150),this.arity="unary",("++"===this.id||"--"===this.id)&&(ht.plusplus?s("Unexpected use of '{a}'.",this,this.id):this.right.identifier&&!this.right.reserved||"."===this.right.id||"["===this.right.id||s("Bad operand.",this)),this},n}function N(e,t){var n=S(e);return n.type=e,n.nud=t,n}function M(e,t){var n=N(e,t);return n.identifier=n.reserved=!0,n}function R(e,t){return M(e,function(){return"function"==typeof t&&t(this),this})}function I(e,t,n,i){var r=w(e,n);return x(r),r.led=function(r){return i||(b(gt,_t),y(_t,ct)),"in"===e&&"!"===r.id&&s("Confusing use of '{a}'.",r,"!"),"function"==typeof t?t(r,this):(this.left=r,this.right=f(n),this)},r}function O(e,t){var n=w(e,100);return n.led=function(e){b(gt,_t),y(_t,ct);var n=f(100);return e&&"NaN"===e.id||n&&"NaN"===n.id?s("Use the isNaN function to compare with NaN.",this):t&&t.apply(this,[e,n]),"!"===e.id&&s("Confusing use of '{a}'.",e,"!"),"!"===n.id&&s("Confusing use of '{a}'.",n,"!"),this.left=e,this.right=n,this},n}function D(e){return e&&("(number)"===e.type&&0===+e.value||"(string)"===e.type&&""===e.value||"null"===e.type&&!ht.eqnull||"true"===e.type||"false"===e.type||"undefined"===e.type)}function P(e){return w(e,20).exps=!0,I(e,function(e,t){if(t.left=e,pt[e.value]===!1&&mt[e.value]["(global)"]===!0?s("Read only.",e):e["function"]&&s("'{a}' is a function.",e,e.value),e){if(ht.esnext&&"const"===Q[e.value]&&s("Attempting to override '{a}' which is a constant",e,e.value),"."===e.id||"["===e.id)return e.left&&"arguments"!==e.left.value||s("Bad assignment.",t),t.right=f(19),t;if(e.identifier&&!e.reserved)return"exception"===Q[e.value]&&s("Do not assign to the exception parameter.",e),t.right=f(19),t;e===$t["function"]&&s("Expected an identifier in an assignment and instead saw a function invocation.",_t)}u("Bad assignment.",t)},20)}function A(e,t,n){var i=w(e,n);return x(i),i.led="function"==typeof t?t:function(e){return ht.bitwise&&s("Unexpected use of '{a}'.",this,this.id),this.left=e,this.right=f(n),this},i}function W(e){return w(e,20).exps=!0,I(e,function(e,t){return ht.bitwise&&s("Unexpected use of '{a}'.",t,t.id),y(gt,_t),y(_t,ct),e?"."===e.id||"["===e.id||e.identifier&&!e.reserved?(f(19),t):(e===$t["function"]&&s("Expected an identifier in an assignment, and instead saw a function invocation.",_t),t):(u("Bad assignment.",t),void 0)},20)}function H(e){var t=w(e,150);return t.led=function(e){return ht.plusplus?s("Unexpected use of '{a}'.",this,this.id):e.identifier&&!e.reserved||"."===e.id||"["===e.id||s("Bad operand.",this),this.left=e,this},t}function U(e){return ct.identifier?(p(),_t.reserved&&!ht.es5&&(e&&"undefined"===_t.value||s("Expected an identifier and instead saw '{a}' (a reserved word).",_t,_t.id)),_t.value):void 0}function F(e){var t=U(e);return t?t:("function"===_t.id&&"("===ct.id?s("Missing name in function declaration."):u("Expected an identifier and instead saw '{a}'.",ct,ct.value),void 0)}function V(e){var t,n=0;if(";"===ct.id&&!dt)for(;;){if(t=h(n),t.reach)return;if("(endline)"!==t.id){if("function"===t.id){if(!ht.latedef)break;s("Inner functions should be listed at the top of the outer function.",t);break}s("Unreachable '{a}' after '{b}'.",t,t.value,e);break}n+=1}}function B(e){var t,n=rt,i=mt,r=ct;return";"===r.id?(p(";"),void 0):(r.identifier&&!r.reserved&&":"===h().id&&(p(),p(":"),mt=Object.create(i),c(r.value,"label"),ct.labelled||s("Label '{a}' on {b} statement.",ct,r.value,ct.value),Rt.test(r.value+":")&&s("Label '{a}' looks like a javascript url.",r,r.value),ct.label=r.value,r=ct),e||_(),t=f(0,!0),r.block||(ht.expr||t&&t.exps?ht.nonew&&"("===t.id&&"new"===t.left.id&&s("Do not use 'new' for side effects."):s("Expected an assignment or function call and instead saw an expression.",_t),";"!==ct.id?ht.asi||ht.lastsemic&&"}"===ct.id&&ct.line===_t.line||a("Missing semicolon.",_t.line,_t.character):(g(_t,ct),p(";"),y(_t,ct))),rt=n,mt=i,t)}function j(e){for(var t,n=[];!ct.reach&&"(end)"!==ct.id;)";"===ct.id?(t=h(),t&&"("===t.id||s("Unnecessary semicolon."),p(";")):n.push(B(e===ct.line));return n}function z(){for(var e,t,n;"(string)"===ct.id;){if(t=h(0),"(endline)"===t.id){e=1;do n=h(e),e+=1;while("(endline)"===n.id);if(";"!==n.id){if("(string)"!==n.id&&"(number)"!==n.id&&"(regexp)"!==n.id&&n.identifier!==!0&&"}"!==n.id)break;s("Missing semicolon.",ct)}else t=n}else if("}"===t.id)s("Missing semicolon.",t);else if(";"!==t.id)break;_(),p(),yt[_t.value]&&s('Unnecessary directive "{a}".',_t,_t.value),"use strict"===_t.value&&(ht.newcap=!0,ht.undef=!0),yt[_t.value]=!0,";"===t.id&&p(";")}}function q(e,n,i){var r,o,a,l,c,d=it,h=rt,f=mt;if(it=e,e&&ht.funcscope||(mt=Object.create(mt)),y(_t,ct),a=ct,"{"===ct.id){if(p("{"),l=_t.line,"}"!==ct.id){for(rt+=ht.indent;!e&&ct.from>rt;)rt+=ht.indent;if(i){o={};for(c in yt)t(yt,c)&&(o[c]=yt[c]);z(),ht.strict&&Q["(context)"]["(global)"]&&(o["use strict"]||yt["use strict"]||s('Missing "use strict" statement.'))}r=j(l),i&&(yt=o),rt-=ht.indent,l!==ct.line&&_()}else l!==ct.line&&_();p("}",a),rt=h}else e?((!n||ht.curly)&&s("Expected '{a}' and instead saw '{b}'.",ct,"{",ct.value),dt=!0,rt+=ht.indent,r=[B(ct.line===_t.line)],rt-=ht.indent,dt=!1):u("Expected '{a}' and instead saw '{b}'.",ct,"{",ct.value);return Q["(verb)"]=null,e&&ht.funcscope||(mt=f),it=d,!e||!ht.noempty||r&&0!==r.length||s("Empty block."),r}function K(e){lt&&"boolean"!=typeof lt[e]&&s("Unexpected /*member '{a}'.",_t,e),"number"==typeof ut[e]?ut[e]+=1:ut[e]=1}function G(e){var t=e.value,n=e.line,i=nt[t];"function"==typeof i&&(i=!1),i?i[i.length-1]!==n&&i.push(n):(i=[n],nt[t]=i)}function $(){var e=U(!0);return e||("(string)"===ct.id?(e=ct.value,p()):"(number)"===ct.id&&(e=ct.value.toString(),p())),e}function X(){var e,t=ct,n=[];if(p("("),v(),")"===ct.id)return p(")"),void 0;for(;;){if(e=F(!0),n.push(e),c(e,"parameter"),","!==ct.id)return p(")",t),v(gt,_t),n;C()}}function Y(e,t){var n,i=ht,r=mt;return ht=Object.create(ht),mt=Object.create(mt),Q={"(name)":e||'"'+Z+'"',"(line)":ct.line,"(context)":Q,"(breakage)":0,"(loopage)":0,"(scope)":mt,"(statement)":t},n=Q,_t.funct=Q,et.push(Q),e&&c(e,"function"),Q["(params)"]=X(),q(!1,!1,!0),mt=r,ht=i,Q["(last)"]=_t.line,Q=Q["(context)"],n}function J(){function e(){var e={},t=ct;if(p("{"),"}"!==ct.id)for(;;){if("(end)"===ct.id)u("Missing '}' to match '{' from line {a}.",ct,t.line);else{if("}"===ct.id){s("Unexpected comma.",_t);break}","===ct.id?u("Unexpected comma.",ct):"(string)"!==ct.id&&s("Expected a string and instead saw {a}.",ct,ct.value)}if(e[ct.value]===!0?s("Duplicate key '{a}'.",ct,ct.value):"__proto__"===ct.value&&!ht.proto||"__iterator__"===ct.value&&!ht.iterator?s("The '{a}' key may produce unexpected results.",ct,ct.value):e[ct.value]=!0,p(),p(":"),J(),","!==ct.id)break;p(",")}p("}")}function t(){var e=ct;if(p("["),"]"!==ct.id)for(;;){if("(end)"===ct.id)u("Missing ']' to match '[' from line {a}.",ct,e.line);else{if("]"===ct.id){s("Unexpected comma.",_t);break}","===ct.id&&u("Unexpected comma.",ct)}if(J(),","!==ct.id)break;p(",")}p("]")}switch(ct.id){case"{":e();break;case"[":t();break;case"true":case"false":case"null":case"(number)":case"(string)":p();break;case"-":p("-"),_t.character!==ct.from&&s("Unexpected space after '-'.",_t),g(_t,ct),p("(number)");break;default:u("Expected a JSON value.",ct)}}var Z,Q,et,tt,nt,it,rt,ot,st,at,ut,lt,ct,dt,ht,pt,ft,gt,mt,vt,yt,bt,_t,Et,Ct,wt,St,Tt,kt,xt,Lt,Nt,Mt,Rt,It,Ot={"<":!0,"<=":!0,"==":!0,"===":!0,"!==":!0,"!=":!0,">":!0,">=":!0,"+":!0,"-":!0,"*":!0,"/":!0,"%":!0},Dt={asi:!0,bitwise:!0,boss:!0,browser:!0,couch:!0,curly:!0,debug:!0,devel:!0,dojo:!0,eqeqeq:!0,eqnull:!0,es5:!0,esnext:!0,evil:!0,expr:!0,forin:!0,funcscope:!0,globalstrict:!0,immed:!0,iterator:!0,jquery:!0,lastsemic:!0,latedef:!0,laxbreak:!0,laxcomma:!0,loopfunc:!0,mootools:!0,multistr:!0,newcap:!0,noarg:!0,node:!0,noempty:!0,nonew:!0,nonstandard:!0,nomen:!0,onevar:!0,onecase:!0,passfail:!0,plusplus:!0,proto:!0,prototypejs:!0,regexdash:!0,regexp:!0,rhino:!0,undef:!0,scripturl:!0,shadow:!0,smarttabs:!0,strict:!0,sub:!0,supernew:!0,trailing:!0,validthis:!0,white:!0,wsh:!0},Pt={ArrayBuffer:!1,ArrayBufferView:!1,Audio:!1,addEventListener:!1,applicationCache:!1,blur:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,DataView:!1,defaultStatus:!1,document:!1,event:!1,FileReader:!1,Float32Array:!1,Float64Array:!1,FormData:!1,focus:!1,frames:!1,getComputedStyle:!1,HTMLElement:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,history:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,Image:!1,length:!1,localStorage:!1,location:!1,moveBy:!1,moveTo:!1,name:!1,navigator:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,Option:!1,parent:!1,print:!1,removeEventListener:!1,resizeBy:!1,resizeTo:!1,screen:!1,scroll:!1,scrollBy:!1,scrollTo:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,status:!1,top:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,WebSocket:!1,window:!1,Worker:!1,XMLHttpRequest:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},At={require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1},Wt={alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1},Ht={dojo:!1,dijit:!1,dojox:!1,define:!1,require:!1},Ut={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"/":"\\/","\\":"\\\\"},Ft=["closure","exception","global","label","outer","unused","var"],Vt={$:!1,jQuery:!1},Bt={$:!1,$$:!1,Assets:!1,Browser:!1,Chain:!1,Class:!1,Color:!1,Cookie:!1,Core:!1,Document:!1,DomReady:!1,DOMReady:!1,Drag:!1,Element:!1,Elements:!1,Event:!1,Events:!1,Fx:!1,Group:!1,Hash:!1,HtmlTable:!1,Iframe:!1,IframeShim:!1,InputValidator:!1,instanceOf:!1,Keyboard:!1,Locale:!1,Mask:!1,MooTools:!1,Native:!1,Options:!1,OverText:!1,Request:!1,Scroller:!1,Slick:!1,Slider:!1,Sortables:!1,Spinner:!1,Swiff:!1,Tips:!1,Type:!1,typeOf:!1,URI:!1,Window:!1},jt={__filename:!1,__dirname:!1,Buffer:!1,console:!1,exports:!1,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,setTimeout:!1,clearTimeout:!1,setInterval:!1,clearInterval:!1},zt={$:!1,$$:!1,$A:!1,$F:!1,$H:!1,$R:!1,$break:!1,$continue:!1,$w:!1,Abstract:!1,Ajax:!1,Class:!1,Enumerable:!1,Element:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Selector:!1,Template:!1,Toggle:!1,Try:!1,Autocompleter:!1,Builder:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1},qt={defineClass:!1,deserialize:!1,gc:!1,help:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},Kt={Array:!1,Boolean:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,eval:!1,EvalError:!1,Function:!1,hasOwnProperty:!1,isFinite:!1,isNaN:!1,JSON:!1,Math:!1,Number:!1,Object:!1,parseInt:!1,parseFloat:!1,RangeError:!1,ReferenceError:!1,RegExp:!1,String:!1,SyntaxError:!1,TypeError:!1,URIError:!1},Gt={escape:!1,unescape:!1},$t={},Xt={ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WSH:!0,WScript:!0,XDomainRequest:!0};!function(){St=/@cc|<\/?|script|\]\s*\]|<\s*!|&lt/i,Tt=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,kt=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/(\*(jshint|jslint|members?|global)?|=|\/)?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/,xt=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,Lt=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Nt=/\*\/|\/\*/,Mt=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,Rt=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i,It=/^\s*\/\*\s*falls\sthrough\s*\*\/\s*$/}(),"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)}),"function"!=typeof Object.create&&(Object.create=function(t){return e.prototype=t,new e}),"function"!=typeof Object.keys&&(Object.keys=function(e){var n,i=[];for(n in e)t(e,n)&&i.push(n);return i}),"function"!=typeof String.prototype.entityify&&(String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),"function"!=typeof String.prototype.isAlpha&&(String.prototype.isAlpha=function(){return this>="a"&&"z￿">=this||this>="A"&&"Z￿">=this}),"function"!=typeof String.prototype.isDigit&&(String.prototype.isDigit=function(){return this>="0"&&"9">=this}),"function"!=typeof String.prototype.supplant&&(String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,function(t,n){var i=e[n];return"string"==typeof i||"number"==typeof i?i:t})}),"function"!=typeof String.prototype.name&&(String.prototype.name=function(){return Mt.test(this)?this:xt.test(this)?'"'+this.replace(Lt,function(e){var t=Ut[e];return t?t:"\\u"+("0000"+e.charCodeAt().toString(16)).slice(-4)})+'"':'"'+this+'"'});var Yt=function(){function e(){var e,t;return s>=st.length?!1:(i=1,u=st[s],s+=1,e=ht.smarttabs?u.search(/ \t/):u.search(/ \t|\t /),e>=0&&a("Mixed spaces and tabs.",s,e+1),u=u.replace(/\t/g,bt),e=u.search(Tt),e>=0&&a("Unsafe character.",s,e),ht.maxlen&&ht.maxlen<u.length&&a("Line too long.",s,u.length),t=/\s+$/.test(u),ht.trailing&&t&&!/^\s+$/.test(u)&&a("Trailing whitespace.",s,t),!0)}function n(e,n){var r,u;return u="(color)"===e||"(range)"===e?{type:e}:"(punctuator)"===e||"(identifier)"===e&&t($t,n)?$t[n]||$t["(error)"]:$t[e],u=Object.create(u),("(string)"===e||"(range)"===e)&&!ht.scripturl&&Rt.test(n)&&a("Script URL.",s,o),"(identifier)"===e&&(u.identifier=!0,"__proto__"!==n||ht.proto?"__iterator__"!==n||ht.iterator?!ht.nomen||"_"!==n.charAt(0)&&"_"!==n.charAt(n.length-1)||(!ht.node||"."===_t.id||"__dirname"!==n&&"__filename"!==n)&&a("Unexpected {a} in '{b}'.",s,o,"dangling '_'",n):a("'{a}' is only available in JavaScript 1.7.",s,o,n):a("The '{a}' property is deprecated.",s,o,n)),u.value=n,u.line=s,u.character=i,u.from=o,r=u.id,"(endline)"!==r&&(ft=r&&("(,=:[!&|?{};".indexOf(r.charAt(r.length-1))>=0||"return"===r||"case"===r)),u
}var i,o,s,u;return{init:function(t){st="string"==typeof t?t.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"):t,st[0]&&"#!"===st[0].substr(0,2)&&(st[0]=""),s=0,e(),o=1},range:function(e,t){var r,c="";for(o=i,u.charAt(0)!==e&&l("Expected '{a}' and instead saw '{b}'.",s,i,e,u.charAt(0));;){switch(u=u.slice(1),i+=1,r=u.charAt(0)){case"":l("Missing '{a}'.",s,i,r);break;case t:return u=u.slice(1),i+=1,n("(range)",c);case"\\":a("Unexpected '{a}'.",s,i,r)}c+=r}},token:function(){function t(e){var t,n=e.exec(u);return n?(y=n[0].length,t=n[1],h=t.charAt(0),u=u.substr(y),o=i+y-t.length,i+=y,t):void 0}function c(t){function r(e){var t=parseInt(u.substr(d+1,e),16);d+=e,t>=32&&126>=t&&34!==t&&92!==t&&39!==t&&a("Unnecessary escapement.",s,i),i+=e,c=String.fromCharCode(t)}var c,d,h="",p=!1;ot&&'"'!==t&&a("Strings must use doublequote.",s,i),d=0;e:for(;;){for(;d>=u.length;){d=0;var f=s,g=o;if(!e()){l("Unclosed string.",f,g);break e}p?p=!1:a("Unclosed string.",f,g)}if(c=u.charAt(d),c===t)return i+=1,u=u.substr(d+1),n("(string)",h,t);if(" ">c){if("\n"===c||"\r"===c)break;a("Control character in string: {a}.",s,i+d,u.slice(0,d))}else if("\\"===c)switch(d+=1,i+=1,c=u.charAt(d)){case"\\":case'"':case"/":break;case"'":ot&&a("Avoid \\'.",s,i);break;case"b":c="\b";break;case"f":c="\f";break;case"n":c="\n";break;case"r":c="\r";break;case"t":c="	";break;case"u":r(4);break;case"v":ot&&a("Avoid \\v.",s,i),c="";break;case"x":ot&&a("Avoid \\x-.",s,i),r(2);break;case"":if(p=!0,ht.multistr){ot&&a("Avoid EOL escapement.",s,i),c="",i-=1;break}a("Bad escapement of EOL. Use option multistr if needed.",s,i);break;default:a("Bad escapement.",s,i)}h+=c,i+=1,d+=1}}for(var d,h,p,f,g,m,v,y,b,_,E,C,w;;){if(!u)return n(e()?"(endline)":"(end)","");if(E=t(kt)){if(h.isAlpha()||"_"===h||"$"===h)return n("(identifier)",E);if(h.isDigit())return isFinite(Number(E))||a("Bad number '{a}'.",s,i,E),u.substr(0,1).isAlpha()&&a("Missing space after '{a}'.",s,i,E),"0"===h&&(f=E.substr(1,1),f.isDigit()?"."!==_t.id&&a("Don't use extra leading zeros '{a}'.",s,i,E):!ot||"x"!==f&&"X"!==f||a("Avoid 0x-. '{a}'.",s,i,E)),"."===E.substr(E.length-1)&&a("A trailing decimal point can be confused with a dot '{a}'.",s,i,E),n("(number)",E);switch(E){case'"':case"'":return c(E);case"//":u="",_t.comment=!0;break;case"/*":for(;v=u.search(Nt),!(v>=0);)e()||l("Unclosed comment.",s,i);i+=v+2,"/"===u.substr(v,1)&&l("Nested comment.",s,i),u=u.substr(v+2),_t.comment=!0;break;case"/*members":case"/*member":case"/*jshint":case"/*jslint":case"/*global":case"*/":return{value:E,type:"special",line:s,character:i,from:o};case"":break;case"/":if("/="===_t.id&&l("A regular expression literal can be confused with '/='.",s,o),ft){for(g=0,p=0,y=0;;){switch(d=!0,h=u.charAt(y),y+=1,h){case"":return l("Unclosed regular expression.",s,o),r("Stopping.",s,o);case"/":for(g>0&&a("{a} unterminated regular expression group(s).",s,o+y,g),h=u.substr(0,y-1),_={g:!0,i:!0,m:!0};_[u.charAt(y)]===!0;)_[u.charAt(y)]=!1,y+=1;return i+=y,u=u.substr(y),_=u.charAt(0),("/"===_||"*"===_)&&l("Confusing regular expression.",s,o),n("(regexp)",h);case"\\":h=u.charAt(y)," ">h?a("Unexpected control character in regular expression.",s,o+y):"<"===h&&a("Unexpected escaped character '{a}' in regular expression.",s,o+y,h),y+=1;break;case"(":if(g+=1,d=!1,"?"===u.charAt(y))switch(y+=1,u.charAt(y)){case":":case"=":case"!":y+=1;break;default:a("Expected '{a}' and instead saw '{b}'.",s,o+y,":",u.charAt(y))}else p+=1;break;case"|":d=!1;break;case")":0===g?a("Unescaped '{a}'.",s,o+y,")"):g-=1;break;case" ":for(_=1;" "===u.charAt(y);)y+=1,_+=1;_>1&&a("Spaces are hard to count. Use {{a}}.",s,o+y,_);break;case"[":h=u.charAt(y),"^"===h&&(y+=1,ht.regexp?a("Insecure '{a}'.",s,o+y,h):"]"===u.charAt(y)&&l("Unescaped '{a}'.",s,o+y,"^")),"]"===h&&a("Empty class.",s,o+y-1),C=!1,w=!1;e:do switch(h=u.charAt(y),y+=1,h){case"[":case"^":a("Unescaped '{a}'.",s,o+y,h),w?w=!1:C=!0;break;case"-":C&&!w?(C=!1,w=!0):w?w=!1:"]"===u.charAt(y)?w=!0:(ht.regexdash!==(2===y||3===y&&"^"===u.charAt(1))&&a("Unescaped '{a}'.",s,o+y-1,"-"),C=!0);break;case"]":w&&!ht.regexdash&&a("Unescaped '{a}'.",s,o+y-1,"-");break e;case"\\":h=u.charAt(y)," ">h?a("Unexpected control character in regular expression.",s,o+y):"<"===h&&a("Unexpected escaped character '{a}' in regular expression.",s,o+y,h),y+=1,/[wsd]/i.test(h)?(w&&(a("Unescaped '{a}'.",s,o+y,"-"),w=!1),C=!1):w?w=!1:C=!0;break;case"/":a("Unescaped '{a}'.",s,o+y-1,"/"),w?w=!1:C=!0;break;case"<":w?w=!1:C=!0;break;default:w?w=!1:C=!0}while(h);break;case".":ht.regexp&&a("Insecure '{a}'.",s,o+y,h);break;case"]":case"?":case"{":case"}":case"+":case"*":a("Unescaped '{a}'.",s,o+y,h)}if(d)switch(u.charAt(y)){case"?":case"+":case"*":y+=1,"?"===u.charAt(y)&&(y+=1);break;case"{":for(y+=1,h=u.charAt(y),("0">h||h>"9")&&a("Expected a number and instead saw '{a}'.",s,o+y,h),y+=1,b=+h;h=u.charAt(y),!("0">h||h>"9");)y+=1,b=+h+10*b;if(m=b,","===h&&(y+=1,m=1/0,h=u.charAt(y),h>="0"&&"9">=h))for(y+=1,m=+h;h=u.charAt(y),!("0">h||h>"9");)y+=1,m=+h+10*m;"}"!==u.charAt(y)?a("Expected '{a}' and instead saw '{b}'.",s,o+y,"}",h):y+=1,"?"===u.charAt(y)&&(y+=1),b>m&&a("'{a}' should not be greater than '{b}'.",s,o+y,b,m)}}return h=u.substr(0,y-1),i+=y,u=u.substr(y),n("(regexp)",h)}return n("(punctuator)",E);case"#":return n("(punctuator)",E);default:return n("(punctuator)",E)}}else{for(E="",h="";u&&"!">u;)u=u.substr(1);u&&(l("Unexpected '{a}'.",s,i,u.substr(0,1)),u="")}}}}}();C.first=!0,N("(number)",function(){return this}),N("(string)",function(){return this}),$t["(identifier)"]={type:"(identifier)",lbp:0,identifier:!0,nud:function(){var e,t=this.value,n=mt[t];if("function"==typeof n?n=void 0:"boolean"==typeof n&&(e=Q,Q=et[0],c(t,"var"),n=Q,Q=e),Q===n)switch(Q[t]){case"unused":Q[t]="var";break;case"unction":Q[t]="function",this["function"]=!0;break;case"function":this["function"]=!0;break;case"label":s("'{a}' is a statement label.",_t,t)}else if(Q["(global)"])ht.undef&&"boolean"!=typeof pt[t]&&("typeof"!==Z&&"delete"!==Z||ct&&("."===ct.value||"["===ct.value))&&o(Q,"'{a}' is not defined.",_t,t),G(_t);else switch(Q[t]){case"closure":case"function":case"var":case"unused":s("'{a}' used out of scope.",_t,t);break;case"label":s("'{a}' is a statement label.",_t,t);break;case"outer":case"global":break;default:if(n===!0)Q[t]=!0;else if(null===n)s("'{a}' is not allowed.",_t,t),G(_t);else if("object"!=typeof n)ht.undef&&("typeof"!==Z&&"delete"!==Z||ct&&("."===ct.value||"["===ct.value))&&o(Q,"'{a}' is not defined.",_t,t),Q[t]=!0,G(_t);else switch(n[t]){case"function":case"unction":this["function"]=!0,n[t]="closure",Q[t]=n["(global)"]?"global":"outer";break;case"var":case"unused":n[t]="closure",Q[t]=n["(global)"]?"global":"outer";break;case"closure":case"parameter":Q[t]=n["(global)"]?"global":"outer";break;case"label":s("'{a}' is a statement label.",_t,t)}}return this},led:function(){u("Expected an operator and instead saw '{a}'.",ct,ct.value)}},N("(regexp)",function(){return this}),S("(endline)"),S("(begin)"),S("(end)").reach=!0,S("</").reach=!0,S("<!"),S("<!--"),S("-->"),S("(error)").reach=!0,S("}").reach=!0,S(")"),S("]"),S('"').reach=!0,S("'").reach=!0,S(";"),S(":").reach=!0,S(","),S("#"),S("@"),M("else"),M("case").reach=!0,M("catch"),M("default").reach=!0,M("finally"),R("arguments",function(e){yt["use strict"]&&Q["(global)"]&&s("Strict violation.",e)}),R("eval"),R("false"),R("Infinity"),R("NaN"),R("null"),R("this",function(e){yt["use strict"]&&!ht.validthis&&(Q["(statement)"]&&Q["(name)"].charAt(0)>"Z"||Q["(global)"])&&s("Possible strict violation.",e)}),R("true"),R("undefined"),P("=","assign",20),P("+=","assignadd",20),P("-=","assignsub",20),P("*=","assignmult",20),P("/=","assigndiv",20).nud=function(){u("A regular expression literal can be confused with '/='.")},P("%=","assignmod",20),W("&=","assignbitand",20),W("|=","assignbitor",20),W("^=","assignbitxor",20),W("<<=","assignshiftleft",20),W(">>=","assignshiftright",20),W(">>>=","assignshiftrightunsigned",20),I("?",function(e,t){return t.left=e,t.right=f(10),p(":"),t["else"]=f(10),t},30),I("||","or",40),I("&&","and",50),A("|","bitor",70),A("^","bitxor",80),A("&","bitand",90),O("==",function(e,t){var n=ht.eqnull&&("null"===e.value||"null"===t.value);return!n&&ht.eqeqeq?s("Expected '{a}' and instead saw '{b}'.",this,"===","=="):D(e)?s("Use '{a}' to compare with '{b}'.",this,"===",e.value):D(t)&&s("Use '{a}' to compare with '{b}'.",this,"===",t.value),this}),O("==="),O("!=",function(e,t){var n=ht.eqnull&&("null"===e.value||"null"===t.value);return!n&&ht.eqeqeq?s("Expected '{a}' and instead saw '{b}'.",this,"!==","!="):D(e)?s("Use '{a}' to compare with '{b}'.",this,"!==",e.value):D(t)&&s("Use '{a}' to compare with '{b}'.",this,"!==",t.value),this}),O("!=="),O("<"),O(">"),O("<="),O(">="),A("<<","shiftleft",120),A(">>","shiftright",120),A(">>>","shiftrightunsigned",120),I("in","in",120),I("instanceof","instanceof",120),I("+",function(e,t){var n=f(130);return e&&n&&"(string)"===e.id&&"(string)"===n.id?(e.value+=n.value,e.character=n.character,!ht.scripturl&&Rt.test(e.value)&&s("JavaScript URL.",e),e):(t.left=e,t.right=n,t)},130),L("+","num"),L("+++",function(){return s("Confusing pluses."),this.right=f(150),this.arity="unary",this}),I("+++",function(e){return s("Confusing pluses."),this.left=e,this.right=f(130),this},130),I("-","sub",130),L("-","neg"),L("---",function(){return s("Confusing minuses."),this.right=f(150),this.arity="unary",this}),I("---",function(e){return s("Confusing minuses."),this.left=e,this.right=f(130),this},130),I("*","mult",140),I("/","div",140),I("%","mod",140),H("++","postinc"),L("++","preinc"),$t["++"].exps=!0,H("--","postdec"),L("--","predec"),$t["--"].exps=!0,L("delete",function(){var e=f(0);return(!e||"."!==e.id&&"["!==e.id)&&s("Variables should not be deleted."),this.first=e,this}).exps=!0,L("~",function(){return ht.bitwise&&s("Unexpected '{a}'.",this,"~"),f(150),this}),L("!",function(){return this.right=f(150),this.arity="unary",Ot[this.right.id]===!0&&s("Confusing use of '{a}'.",this,"!"),this}),L("typeof","typeof"),L("new",function(){var e,t=f(155);if(t&&"function"!==t.id)if(t.identifier)switch(t["new"]=!0,t.value){case"Object":s("Use the object literal notation {}.",_t);break;case"Number":case"String":case"Boolean":case"Math":case"JSON":s("Do not use {a} as a constructor.",_t,t.value);break;case"Function":ht.evil||s("The Function constructor is eval.");break;case"Date":case"RegExp":break;default:"function"!==t.id&&(e=t.value.substr(0,1),ht.newcap&&("A">e||e>"Z")&&s("A constructor name should start with an uppercase letter.",_t))}else"."!==t.id&&"["!==t.id&&"("!==t.id&&s("Bad constructor.",_t);else ht.supernew||s("Weird construction. Delete 'new'.",this);return g(_t,ct),"("===ct.id||ht.supernew||s("Missing '()' invoking a constructor."),this.first=t,this}),$t["new"].exps=!0,L("void").exps=!0,I(".",function(e,t){g(gt,_t),m();var n=F();return"string"==typeof n&&K(n),t.left=e,t.right=n,!e||"arguments"!==e.value||"callee"!==n&&"caller"!==n?ht.evil||!e||"document"!==e.value||"write"!==n&&"writeln"!==n||s("document.write can be a form of eval.",e):ht.noarg?s("Avoid arguments.{a}.",e,n):yt["use strict"]&&u("Strict violation."),ht.evil||"eval"!==n&&"execScript"!==n||s("eval is evil."),t},160,!0),I("(",function(e,t){"}"!==gt.id&&")"!==gt.id&&m(gt,_t),v(),ht.immed&&!e.immed&&"function"===e.id&&s("Wrap an immediate function invocation in parentheses to assist the reader in understanding that the expression is the result of a function, and not the function itself.");var n=0,i=[];if(e&&"(identifier)"===e.type&&e.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)&&"Number"!==e.value&&"String"!==e.value&&"Boolean"!==e.value&&"Date"!==e.value&&("Math"===e.value?s("Math is not a function.",e):ht.newcap&&s("Missing 'new' prefix when invoking a constructor.",e)),")"!==ct.id)for(;i[i.length]=f(10),n+=1,","===ct.id;)C();return p(")"),v(gt,_t),"object"==typeof e&&("parseInt"===e.value&&1===n&&s("Missing radix parameter.",e),ht.evil||("eval"===e.value||"Function"===e.value||"execScript"===e.value?s("eval is evil.",e):!i[0]||"(string)"!==i[0].id||"setTimeout"!==e.value&&"setInterval"!==e.value||s("Implied eval is evil. Pass a function instead of a string.",e)),e.identifier||"."===e.id||"["===e.id||"("===e.id||"&&"===e.id||"||"===e.id||"?"===e.id||s("Bad invocation.",e)),t.left=e,t},155,!0).exps=!0,L("(",function(){v(),"function"===ct.id&&(ct.immed=!0);var e=f(0);return p(")",this),v(gt,_t),ht.immed&&"function"===e.id&&("("===ct.id||"."===ct.id&&("call"===h().value||"apply"===h().value)?s("Move the invocation into the parens that contain the function.",ct):s("Do not wrap function literals in parens unless they are to be immediately invoked.",this)),e}),I("[",function(e,t){m(gt,_t),v();var n,i=f(0);return i&&"(string)"===i.type&&(ht.evil||"eval"!==i.value&&"execScript"!==i.value||s("eval is evil.",t),K(i.value),!ht.sub&&Mt.test(i.value)&&(n=$t[i.value],n&&n.reserved||s("['{a}'] is better written in dot notation.",i,i.value))),p("]",t),v(gt,_t),t.left=e,t.right=i,t},160,!0),L("[",function(){var e=_t.line!==ct.line;for(this.first=[],e&&(rt+=ht.indent,ct.from===rt+ht.indent&&(rt+=ht.indent));"(end)"!==ct.id;){for(;","===ct.id;)s("Extra comma."),p(",");if("]"===ct.id)break;if(e&&_t.line!==ct.line&&_(),this.first.push(f(10)),","!==ct.id)break;if(C(),"]"===ct.id&&!ht.es5){s("Extra comma.",_t);break}}return e&&(rt-=ht.indent,_()),p("]",this),this},160),function(e){e.nud=function(){function e(e,n){d[e]&&t(d,e)?s("Duplicate member '{a}'.",ct,a):d[e]={},d[e].basic=!0,d[e].basicToken=n}function n(e,n){d[e]&&t(d,e)?(d[e].basic||d[e].setter)&&s("Duplicate member '{a}'.",ct,a):d[e]={},d[e].setter=!0,d[e].setterToken=n}function i(e){d[e]&&t(d,e)?(d[e].basic||d[e].getter)&&s("Duplicate member '{a}'.",ct,a):d[e]={},d[e].getter=!0,d[e].getterToken=_t}var r,o,a,l,c,d={};for(r=_t.line!==ct.line,r&&(rt+=ht.indent,ct.from===rt+ht.indent&&(rt+=ht.indent));"}"!==ct.id;){if(r&&_(),"get"===ct.value&&":"!==h().id)p("get"),ht.es5||u("get/set are ES5 features."),a=$(),a||u("Missing property name."),i(a),c=ct,g(_t,ct),o=Y(),l=o["(params)"],l&&s("Unexpected parameter '{a}' in get {b} function.",c,l[0],a),g(_t,ct);else if("set"===ct.value&&":"!==h().id)p("set"),ht.es5||u("get/set are ES5 features."),a=$(),a||u("Missing property name."),n(a,ct),c=ct,g(_t,ct),o=Y(),l=o["(params)"],l&&1===l.length||s("Expected a single parameter in set {a} function.",c,a);else{if(a=$(),e(a,ct),"string"!=typeof a)break;p(":"),y(_t,ct),f(10)}if(K(a),","!==ct.id)break;C(),","===ct.id?s("Extra comma.",_t):"}"!==ct.id||ht.es5||s("Extra comma.",_t)}if(r&&(rt-=ht.indent,_()),p("}",this),ht.es5)for(var m in d)t(d,m)&&d[m].setter&&!d[m].getter&&s("Setter is defined without getter.",d[m].setterToken);return this},e.fud=function(){u("Expected to see a statement and instead saw a block.",_t)}}(S("{")),Ct=function(){var e=T("const",function(e){var t,n,i;for(this.first=[];(y(_t,ct),t=F(),"const"===Q[t]&&s("const '"+t+"' has already been declared"),Q["(global)"]&&pt[t]===!1&&s("Redefinition of '{a}'.",_t,t),c(t,"const"),!e)&&(n=_t,this.first.push(_t),"="!==ct.id&&s("const '{a}' is initialized to 'undefined'.",_t,t),"="===ct.id&&(y(_t,ct),p("="),y(_t,ct),"undefined"===ct.id&&s("It is not necessary to initialize '{a}' to 'undefined'.",_t,t),"="===h(0).id&&ct.identifier&&u("Constant {a} was not declared correctly.",ct,ct.value),i=f(0),n.first=i),","===ct.id);)C();return this});e.exps=!0};var Jt=T("var",function(e){var t,n,i;for(Q["(onevar)"]&&ht.onevar?s("Too many var statements."):Q["(global)"]||(Q["(onevar)"]=!0),this.first=[];(y(_t,ct),t=F(),ht.esnext&&"const"===Q[t]&&s("const '"+t+"' has already been declared"),Q["(global)"]&&pt[t]===!1&&s("Redefinition of '{a}'.",_t,t),c(t,"unused"),!e)&&(n=_t,this.first.push(_t),"="===ct.id&&(y(_t,ct),p("="),y(_t,ct),"undefined"===ct.id&&s("It is not necessary to initialize '{a}' to 'undefined'.",_t,t),"="===h(0).id&&ct.identifier&&u("Variable {a} was not declared correctly.",ct,ct.value),i=f(0),n.first=i),","===ct.id);)C();return this});Jt.exps=!0,k("function",function(){it&&s("Function declarations should not be placed in blocks. Use a function expression or move the statement to the top of the outer function.",_t);var e=F();return ht.esnext&&"const"===Q[e]&&s("const '"+e+"' has already been declared"),g(_t,ct),c(e,"unction"),Y(e,!0),"("===ct.id&&ct.line===_t.line&&u("Function declarations are not invocable. Wrap the whole function invocation in parens."),this}),L("function",function(){var e=U();return e?g(_t,ct):y(_t,ct),Y(e),!ht.loopfunc&&Q["(loopage)"]&&s("Don't make functions within a loop."),this}),k("if",function(){var e=ct;return p("("),y(this,e),v(),f(20),"="===ct.id&&(ht.boss||s("Expected a conditional expression and instead saw an assignment."),p("="),f(20)),p(")",e),v(gt,_t),q(!0,!0),"else"===ct.id&&(y(_t,ct),p("else"),"if"===ct.id||"switch"===ct.id?B(!0):q(!0,!0)),this}),k("try",function(){var e,t,n;return q(!1),"catch"===ct.id&&(p("catch"),y(_t,ct),p("("),n=mt,mt=Object.create(n),t=ct.value,"(identifier)"!==ct.type?s("Expected an identifier and instead saw '{a}'.",ct,t):c(t,"exception"),p(),p(")"),q(!1),e=!0,mt=n),"finally"===ct.id?(p("finally"),q(!1),void 0):(e||u("Expected '{a}' and instead saw '{b}'.",ct,"catch",ct.value),this)}),k("while",function(){var e=ct;return Q["(breakage)"]+=1,Q["(loopage)"]+=1,p("("),y(this,e),v(),f(20),"="===ct.id&&(ht.boss||s("Expected a conditional expression and instead saw an assignment."),p("="),f(20)),p(")",e),v(gt,_t),q(!0,!0),Q["(breakage)"]-=1,Q["(loopage)"]-=1,this}).labelled=!0,M("with"),k("switch",function(){var e=ct,t=!1;for(Q["(breakage)"]+=1,p("("),y(this,e),v(),this.condition=f(20),p(")",e),v(gt,_t),y(_t,ct),e=ct,p("{"),y(_t,ct),rt+=ht.indent,this.cases=[];;)switch(ct.id){case"case":switch(Q["(verb)"]){case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:It.test(st[ct.line-2])||s("Expected a 'break' statement before 'case'.",_t)}_(-ht.indent),p("case"),this.cases.push(f(20)),t=!0,p(":"),Q["(verb)"]="case";break;case"default":switch(Q["(verb)"]){case"break":case"continue":case"return":case"throw":break;default:It.test(st[ct.line-2])||s("Expected a 'break' statement before 'default'.",_t)}_(-ht.indent),p("default"),t=!0,p(":");break;case"}":return rt-=ht.indent,_(),p("}",e),(1===this.cases.length||"true"===this.condition.id||"false"===this.condition.id)&&(ht.onecase||s("This 'switch' should be an 'if'.",this)),Q["(breakage)"]-=1,Q["(verb)"]=void 0,void 0;case"(end)":return u("Missing '{a}'.",ct,"}"),void 0;default:if(t)switch(_t.id){case",":return u("Each value should have its own case label."),void 0;case":":t=!1,j();break;default:return u("Missing ':' on a case clause.",_t),void 0}else{if(":"!==_t.id)return u("Expected '{a}' and instead saw '{b}'.",ct,"case",ct.value),void 0;p(":"),u("Unexpected '{a}'.",_t,":"),j()}}}).labelled=!0,T("debugger",function(){return ht.debug||s("All 'debugger' statements should be removed."),this}).exps=!0,function(){var e=T("do",function(){Q["(breakage)"]+=1,Q["(loopage)"]+=1,this.first=q(!0),p("while");var e=ct;return y(_t,e),p("("),v(),f(20),"="===ct.id&&(ht.boss||s("Expected a conditional expression and instead saw an assignment."),p("="),f(20)),p(")",e),v(gt,_t),Q["(breakage)"]-=1,Q["(loopage)"]-=1,this});e.labelled=!0,e.exps=!0}(),k("for",function(){var e,t=ct;if(Q["(breakage)"]+=1,Q["(loopage)"]+=1,p("("),y(this,t),v(),"in"===h("var"===ct.id?1:0).id){if("var"===ct.id)p("var"),Jt.fud.call(Jt,!0);else{switch(Q[ct.value]){case"unused":Q[ct.value]="var";break;case"var":break;default:s("Bad for in variable '{a}'.",ct,ct.value)}p()}return p("in"),f(20),p(")",t),e=q(!0,!0),ht.forin&&e&&(e.length>1||"object"!=typeof e[0]||"if"!==e[0].value)&&s("The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.",this),Q["(breakage)"]-=1,Q["(loopage)"]-=1,this}if(";"!==ct.id)if("var"===ct.id)p("var"),Jt.fud.call(Jt);else for(;f(0,"for"),","===ct.id;)C();if(E(_t),p(";"),";"!==ct.id&&(f(20),"="===ct.id&&(ht.boss||s("Expected a conditional expression and instead saw an assignment."),p("="),f(20))),E(_t),p(";"),";"===ct.id&&u("Expected '{a}' and instead saw '{b}'.",ct,")",";"),")"!==ct.id)for(;f(0,"for"),","===ct.id;)C();return p(")",t),v(gt,_t),q(!0,!0),Q["(breakage)"]-=1,Q["(loopage)"]-=1,this}).labelled=!0,T("break",function(){var e=ct.value;return 0===Q["(breakage)"]&&s("Unexpected '{a}'.",ct,this.value),ht.asi||E(this),";"!==ct.id&&_t.line===ct.line&&("label"!==Q[e]?s("'{a}' is not a statement label.",ct,e):mt[e]!==Q&&s("'{a}' is out of scope.",ct,e),this.first=ct,p()),V("break"),this}).exps=!0,T("continue",function(){var e=ct.value;return 0===Q["(breakage)"]&&s("Unexpected '{a}'.",ct,this.value),ht.asi||E(this),";"!==ct.id?_t.line===ct.line&&("label"!==Q[e]?s("'{a}' is not a statement label.",ct,e):mt[e]!==Q&&s("'{a}' is out of scope.",ct,e),this.first=ct,p()):Q["(loopage)"]||s("Unexpected '{a}'.",ct,this.value),V("continue"),this}).exps=!0,T("return",function(){return this.line===ct.line?("(regexp)"===ct.id&&s("Wrap the /regexp/ literal in parens to disambiguate the slash operator."),";"===ct.id||ct.reach||(y(_t,ct),"="!==h().value||ht.boss||a("Did you mean to return a conditional instead of an assignment?",_t.line,_t.character+1),this.first=f(0))):ht.asi||E(this),V("return"),this}).exps=!0,T("throw",function(){return E(this),y(_t,ct),this.first=f(20),V("throw"),this}).exps=!0,M("class"),M("const"),M("enum"),M("export"),M("extends"),M("import"),M("super"),M("let"),M("yield"),M("implements"),M("interface"),M("package"),M("private"),M("protected"),M("public"),M("static");var Zt=function(e,t,r){var o,a,u;if(JSHINT.errors=[],JSHINT.undefs=[],pt=Object.create(Kt),n(pt,r||{}),t){if(o=t.predef)if(Array.isArray(o))for(a=0;a<o.length;a+=1)pt[o[a]]=!0;else if("object"==typeof o)for(u=Object.keys(o),a=0;a<u.length;a+=1)pt[u[a]]=!!o[u[a]];ht=t}else ht={};for(ht.indent=ht.indent||4,ht.maxerr=ht.maxerr||50,bt="",a=0;a<ht.indent;a+=1)bt+=" ";rt=1,tt=Object.create(pt),mt=tt,Q={"(global)":!0,"(name)":"(global)","(scope)":mt,"(breakage)":0,"(loopage)":0},et=[Q],Et=[],vt=null,ut={},lt=null,nt={},it=!1,at=[],ot=!1,wt=0,Yt.init(e),ft=!0,yt={},gt=_t=ct=$t["(begin)"],i(),n(pt,r||{});try{switch(p(),ct.id){case"{":case"[":ht.laxbreak=!0,ot=!0,J();break;default:z(),yt["use strict"]&&!ht.globalstrict&&s('Use the function form of "use strict".',gt),j()}p("(end)");var l=function(e,t){do{if("string"==typeof t[e])return"unused"===t[e]?t[e]="var":"unction"===t[e]&&(t[e]="closure"),!0;t=t["(context)"]}while(t);return!1},c=function(e,t){if(nt[e]){for(var n=[],i=0;i<nt[e].length;i+=1)nt[e][i]!==t&&n.push(nt[e][i]);0===n.length?delete nt[e]:nt[e]=n}};for(a=0;a<JSHINT.undefs.length;a+=1)u=JSHINT.undefs[a].slice(0),l(u[2].value,u[0])?c(u[2].value,u[2].line):s.apply(s,u.slice(1))}catch(d){if(d){var h=ct||{};JSHINT.errors.push({raw:d.raw,reason:d.message,line:d.line||h.line,character:d.character||h.from},null)}}return 0===JSHINT.errors.length};return Zt.data=function(){var e,n,i,r,o,s,a,u={functions:[],options:ht},l=[],c=[],d=[];Zt.errors.length&&(u.errors=Zt.errors),ot&&(u.json=!0);for(s in nt)t(nt,s)&&l.push({name:s,line:nt[s]});for(l.length>0&&(u.implieds=l),Et.length>0&&(u.urls=Et),n=Object.keys(mt),n.length>0&&(u.globals=n),r=1;r<et.length;r+=1){for(i=et[r],e={},o=0;o<Ft.length;o+=1)e[Ft[o]]=[];for(s in i)t(i,s)&&"("!==s.charAt(0)&&(a=i[s],"unction"===a&&(a="unused"),Array.isArray(e[a])&&(e[a].push(s),"unused"===a&&d.push({name:s,line:i["(line)"],"function":i["(name)"]})));for(o=0;o<Ft.length;o+=1)0===e[Ft[o]].length&&delete e[Ft[o]];e.name=i["(name)"],e.param=i["(params)"],e.line=i["(line)"],e.last=i["(last)"],u.functions.push(e)}d.length>0&&(u.unused=d),c=[];for(s in ut)if("number"==typeof ut[s]){u.member=ut;break}return u},Zt.report=function(e){function t(e,t){var n,i,r;if(t){for(f.push("<div><i>"+e+"</i> "),t=t.sort(),i=0;i<t.length;i+=1)t[i]!==r&&(r=t[i],f.push((n?", ":"")+r),n=!0);f.push("</div>")}}var n,i,r,o,s,a,u,l,c,d=Zt.data(),h=[],p="",f=[];if(d.errors||d.implieds||d.unused){if(r=!0,f.push("<div id=errors><i>Error:</i>"),d.errors)for(s=0;s<d.errors.length;s+=1)n=d.errors[s],n&&(i=n.evidence||"",f.push("<p>Problem"+(isFinite(n.line)?" at line "+n.line+" character "+n.character:"")+": "+n.reason.entityify()+"</p><p class=evidence>"+(i&&(i.length>80?i.slice(0,77)+"...":i).entityify())+"</p>"));if(d.implieds){for(c=[],s=0;s<d.implieds.length;s+=1)c[s]="<code>"+d.implieds[s].name+"</code>&nbsp;<i>"+d.implieds[s].line+"</i>";f.push("<p><i>Implied global:</i> "+c.join(", ")+"</p>")}if(d.unused){for(c=[],s=0;s<d.unused.length;s+=1)c[s]="<code><u>"+d.unused[s].name+"</u></code>&nbsp;<i>"+d.unused[s].line+"</i> <code>"+d.unused[s]["function"]+"</code>";f.push("<p><i>Unused variable:</i> "+c.join(", ")+"</p>")}d.json&&f.push("<p>JSON: bad.</p>"),f.push("</div>")}if(!e){for(f.push("<br><div id=functions>"),d.urls&&t("URLs<br>",d.urls,"<br>"),d.json&&!r?f.push("<p>JSON: good.</p>"):d.globals?f.push("<div><i>Global</i> "+d.globals.sort().join(", ")+"</div>"):f.push("<div><i>No new global variables introduced.</i></div>"),s=0;s<d.functions.length;s+=1)o=d.functions[s],f.push("<br><div class=function><i>"+o.line+"-"+o.last+"</i> "+(o.name||"")+"("+(o.param?o.param.join(", "):"")+")</div>"),t("<big><b>Unused</b></big>",o.unused),t("Closure",o.closure),t("Variable",o["var"]),t("Exception",o.exception),t("Outer",o.outer),t("Global",o.global),t("Label",o.label);if(d.member){if(h=Object.keys(d.member),h.length){for(h=h.sort(),p="<br><pre id=members>/*members ",u=10,s=0;s<h.length;s+=1)a=h[s],l=a.name(),u+l.length>72&&(f.push(p+"<br>"),p="    ",u=1),u+=l.length+2,1===d.member[a]&&(l="<i>"+l+"</i>"),s<h.length-1&&(l+=", "),p+=l;f.push(p+"<br>*/</pre>")}f.push("</div>")}}return f.join("")},Zt.jshint=Zt,Zt}();"object"==typeof exports&&exports&&(exports.JSHINT=JSHINT),define("vs/languages/javascript/lib/jshint",[],function(){return this.JSHINT}),"undefined"!=typeof exports&&(exports.js_beautify=js_beautify),define("vs/languages/javascript/lib/jsbeautify",[],function(){return this.js_beautify}),require.config({shim:{"vs/languages/javascript/lib/jshint":{exports:function(){return this.JSHINT}},"vs/languages/javascript/lib/jsbeautify":{exports:function(){return this.js_beautify}}}}),define("vs/languages/javascript/lib/jsLib",["./jshint","./jsbeautify"],function(e,t){return{JSHINT:e,js_beautify:t}}),define("vs/base/lifecycle",["require","exports"],function(e,t){"use strict";function n(e){for(var t=0,n=e.length;n>t;t++)e[t].dispose();return[]}function i(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];return{dispose:function(){return t.disposeAll(e)}}}function r(e){for(;e.length>0;)e.pop()()}t.disposeAll=n,t.combinedDispose=i,t.cAll=r}),define("vs/languages/typescript/service/textEdit",["require","exports","vs/base/strings"],function(e,t,n){"use strict";function i(e){return new s(e)}var r=n,o=function(){function e(e,t,n){this.offset=e,this.length=t,this.text=n||"",this.parent=null,this.children=[]}return e.prototype.isNoop=function(){return 0===this.length&&0===this.text.length},e.prototype.isDelete=function(){return this.length>0&&0===this.text.length},e.prototype.isInsert=function(){return 0===this.length&&this.text.length>0},e.prototype.isReplace=function(){return this.length>0&&this.text.length>0},e.prototype.getRightMostChild=function(){var e=this.children.length;return 0===e?this:this.children[e-1].getRightMostChild()},e.prototype.remove=function(){return this.parent?this.parent.removeChild(this):!1},e.prototype.addChild=function(e){e.parent=this;var t,n;for(t=0,n=this.children.length;n>t&&!(this.children[t].offset>e.offset);t++);this.children.splice(t,0,e)},e.prototype.removeChild=function(e){var t=this.children.indexOf(e);return-1===t?!1:(e.parent=null,this.children.splice(t,1),!0)},e.prototype.insert=function(e){if(this.enclosedBy(e))return e.insert(this),e;var t,n,i;for(t=0,n=this.children.length;n>t;t++)if(i=this.children[t],i.enclosedBy(e))this.removeChild(i),e.insert(i),n--,t--;else if(i.encloses(e))return i.insert(e),this;return this.addChild(e),this},e.prototype.enclosedBy=function(e){return e.encloses(this)},e.prototype.encloses=function(e){if(this.offset===this.offset&&this.length===e.length)return!1;var t=this.length-e.length,n=e.offset-this.offset;return n>=0&&t>=0&&t>=n},e}();t.Edit=o;var s=function(){function e(e){this.model=e,this.modelVersion=e.versionId,this.edit=new o(0,this.model.getValue().length,null)}return e.prototype.replace=function(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=null);var i=new o(e,t,n);i.isNoop()||(this.edit=this.edit.insert(i))},e.prototype.apply=function(){if(this.model.versionId!==this.modelVersion)throw new Error("illegal state - model has been changed");for(var e,t=this.model.getValue();(e=this.edit.getRightMostChild())!==this.edit;)t=r.splice(t,e.offset,e.length,e.text),e.parent.length+=e.text.length-e.length,e.remove();return t},e}();t.create=i}),define("vs/languages/lib/javascriptSnippets",["require","exports","vs/nls!vs/languages/javascript/javascriptWorker2"],function(e,t,n){"use strict";var i=n;t.snippets=[{type:"snippet",label:"define",codeSnippet:["define([","	'require',","	'{{require}}'","], function(require, {{factory}}) {","	'use strict';","	{{}}","});"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",0)},{type:"snippet",label:"for",codeSnippet:["for (var {{index}} = 0; {{index}} < {{array}}.length; {{index}}++) {","	var {{element}} = {{array}}[{{index}}];","	{{}}","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",1)},{type:"snippet",label:"foreach",codeSnippet:["{{array}}.forEach(function({{element}}) {","	{{}}","}, this);"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",2)},{type:"snippet",label:"forin",codeSnippet:["for (var {{key}} in {{object}}) {","	if ({{object}}.hasOwnProperty({{key}})) {","		var {{element}} = {{object}}[{{key}}];","		{{}}","	}","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",3)},{type:"snippet",label:"function",codeSnippet:["function {{name}}({{params}}) {","	{{}}","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",4)},{type:"snippet",label:"if",codeSnippet:["if ({{condition}}) {","	{{}}","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",5)},{type:"snippet",label:"ifelse",codeSnippet:["if ({{condition}}) {","	{{}}","} else {","	","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",6)},{type:"snippet",label:"new",codeSnippet:["var {{name}} = new {{type}}({{arguments}});{{}}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",7)},{type:"snippet",label:"switch",codeSnippet:["switch ({{key}}) {","	case {{value}}:","		{{}}","		break;","","	default:","		break;","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",8)},{type:"snippet",label:"while",codeSnippet:["while ({{condition}}) {","	{{}}","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",9)},{type:"snippet",label:"dowhile",codeSnippet:["do {","	{{}}","} while ({{condition}});"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",10)},{type:"snippet",label:"trycatch",codeSnippet:["try {","	{{}}","} catch ({{error}}) {","	","}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",11)},{type:"snippet",label:"log",codeSnippet:["console.log({{message}});{{}}"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",12)},{type:"snippet",label:"settimeout",codeSnippet:["setTimeout(function() {","	{{}}","}, {{timeout}});"].join("\n"),documentationLabel:i.localize("vs_languages_lib_javascriptSnippets",13)}]}),define("vs/languages/typescript/service/typescriptSnippets",["require","exports","vs/nls!vs/languages/javascript/javascriptWorker2"],function(e,t,n){"use strict";
var i=n;t.snippets=[{type:"snippet",label:"foreach =>",codeSnippet:["{{array}}.forEach(({{element}}:{{type}}) => {","	{{}}","});"].join("\n"),documentationLabel:i.localize("vs_languages_typescript_service_typescriptSnippets",0)},{type:"snippet",label:"jsdoc comment",codeSnippet:["/**"," * {{}}"," */"].join("\n"),documentationLabel:i.localize("vs_languages_typescript_service_typescriptSnippets",1)},{type:"snippet",label:"ctor",codeSnippet:["/**"," *"," */","constructor() {","	super();","	{{}}","}"].join("\n"),documentationLabel:i.localize("vs_languages_typescript_service_typescriptSnippets",2)},{type:"snippet",label:"class",codeSnippet:["/**"," * {{name}}"," */","class {{name}} {","	constructor({{parameters}}) {","		{{}}","	}","}"].join("\n"),documentationLabel:i.localize("vs_languages_typescript_service_typescriptSnippets",3)},{type:"snippet",label:"public method",codeSnippet:["/**"," * {{name}}"," */","public {{name}}() {","	{{}}","}"].join("\n"),documentationLabel:i.localize("vs_languages_typescript_service_typescriptSnippets",4)},{type:"snippet",label:"private method",codeSnippet:["private {{name}}() {","	{{}}","}"].join("\n"),documentationLabel:i.localize("vs_languages_typescript_service_typescriptSnippets",5)}]});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/base/collections",["require","exports","vs/base/errors"],function(e,t,n){"use strict";var i=n,r=function(){function e(){}return e.prototype.toArray=function(e,t){return"undefined"==typeof e&&(e=new Array),"undefined"==typeof t&&(t=0),this.forEach(function(n){e[t]=n,t+=1}),e},Object.defineProperty(e.prototype,"count",{get:function(){var e=0;return this.forEach(function(){e+=1}),e},enumerable:!0,configurable:!0}),e.prototype.forEach=function(){throw i.notImplemented()},e}();t.AbstractCollection=r;var o=function(e){function t(t){e.call(this),this.data=t}return __extends(t,e),t.prototype.forEach=function(e){for(var t=0;t<this.data.length;t++){var n=this.data[t];if(e(n)===!1)return}},t}(r);t.ArrayCollection=o;var s=function(e){function t(){e.apply(this,arguments),this._dict=new c}return __extends(t,e),t.prototype.forEach=function(e){this._dict.forEach(function(t){e(t.key)})},Object.defineProperty(t.prototype,"count",{get:function(){return this._dict.count},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._dict.clear()},t.prototype.add=function(e){this._dict.add(e,!0)},t.prototype.remove=function(e){var t=this.count;return this._dict.remove(e),t!==this.count},t.prototype.contains=function(e){return this._dict.containsKey(e)},t}(r);t.HashSet=s;var a=function(e){function t(t){e.call(this),this._dict=new u(t)}return __extends(t,e),t.prototype.forEach=function(e){this._dict.forEach(function(t){e(t.key)})},Object.defineProperty(t.prototype,"count",{get:function(){return this._dict.count},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._dict.clear()},t.prototype.add=function(e){this._dict.add(e,!0)},t.prototype.remove=function(e){var t=this.count;return this._dict.remove(e),t!==this.count},t.prototype.contains=function(e){return this._dict.containsKey(e)},t}(r);t.DelegateHashSet=a;var u=function(e){function t(t){e.call(this),this.hashFn=t,this._data={},this._count=0}return __extends(t,e),t.prototype.forEach=function(e){for(var t in this._data)if(this._data.hasOwnProperty(t)){var n=this._data[t];if(e(n)===!1)return}},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){var e=new Array;return this.forEach(function(t){e.push(t.key)}),new o(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var e=new Array;return this.forEach(function(t){e.push(t.value)}),new o(e)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._data={},this._count=0},t.prototype.add=function(e,t){var n=this.hashFn(e);this._data.hasOwnProperty(n)||(this._count+=1),this._data[n]={key:e,value:t}},t.prototype.get=function(e){var t=this.hashFn(e);return this._data.hasOwnProperty(t)?this._data[t].value:null},t.prototype.remove=function(e){var t=this.hashFn(e);this._data.hasOwnProperty(t)&&(this._count-=1,delete this._data[t])},t.prototype.containsKey=function(e){return this._data.hasOwnProperty(this.hashFn(e))},t}(r);t.DelegateDictionary=u;var l=function(e){function t(){e.call(this,function(e){return String(e)})}return __extends(t,e),t}(u);t.StringDictionary=l;var c=function(e){function t(t){"undefined"==typeof t&&(t=10),e.call(this),this._elements=new Array(t),this._count=0}return __extends(t,e),t.wrap=function(e){return null===e?t.NULL_PLACEHOLDER:"undefined"==typeof e?t.UNDEFINED_PLACEHOLDER:e},t.unwrap=function(e){return e===t.NULL_PLACEHOLDER?null:e===t.UNDEFINED_PLACEHOLDER?void 0:e},t.prototype.forEach=function(e){for(var n=0;n<this._elements.length;n++){var i=this._elements[n];if("undefined"!=typeof i)for(var r=0;r<i.length;r++){var o={key:t.unwrap(i[r].key),value:i[r].value};if(e(o)===!1)return}}},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){var e=new Array;return this.forEach(function(n){e.push(t.unwrap(n.key))}),new o(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){var e=new Array;return this.forEach(function(t){e.push(t.value)}),new o(e)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._elements.length=0,this._count=0},t.prototype.add=function(e,n){e=t.wrap(e);var i=this.indexOf(e),r=this._elements[i];if("undefined"==typeof r)this._elements[i]=[{key:e,value:n}],this._count+=1;else{for(var o=0;o<r.length;o++)if(e.equals(r[o].key))return;r.push({key:e,value:n}),this._count+=1}},t.prototype.get=function(e){e=t.wrap(e);var n=this.indexOf(e),i=this._elements[n];if("undefined"!=typeof i)for(var r=0;r<i.length;r++)if(e.equals(i[r].key))return i[r].value;return null},t.prototype.remove=function(e){e=t.wrap(e);var n=this.indexOf(e),i=this._elements[n];if("undefined"!=typeof i)for(var r=0;r<i.length;r++)if(e.equals(i[r].key))return i.splice(r,1),this._count-=1,!0;return!1},t.prototype.containsKey=function(e){e=t.wrap(e);var n=this.indexOf(e),i=this._elements[n];if("undefined"!=typeof i)for(var r=0;r<i.length;r++)if(e.equals(i[r].key))return!0;return!1},t.prototype.indexOf=function(e){return e.hashCode()%this._elements.length},t.UNDEFINED_PLACEHOLDER={hashCode:function(){return 0},equals:function(e){return t.UNDEFINED_PLACEHOLDER===e}},t.NULL_PLACEHOLDER={hashCode:function(){return 0},equals:function(e){return t.NULL_PLACEHOLDER===e}},t}(r);t.Dictionary=c});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/resources/remoteModels",["require","exports","vs/base/network","vs/editor/core/model/mirrorModel"],function(e,t,n,i){"use strict";var r=n,o=i,s=function(e){function t(n,i,o){if("undefined"==typeof o&&(o=!1),e.call(this,n.toExternal(),o?-1:1,t.normalize(i),n),o){var s=n.toExternal();this.actualResource=new r.URL(s.substring(0,s.length-5)+".ts")}}return __extends(t,e),t.normalize=function(e){return e.length>0&&e.charCodeAt(0)===t._bom&&(e=e.substring(1)),e.replace(/\r\n/g,"\n")},t.prototype.isGenerated=function(){return!!this.actualResource},t.prototype.getActualResource=function(){return this.actualResource?this.actualResource:this.getAssociatedResource()},t._bom=65279,t}(o.MirrorModel);t.RemoteModel=s;var a=function(e){function t(t,n){e.call(this,t,n,!1)}return __extends(t,e),t}(s);t.DefaultLibModel=a;var u=function(e){function t(t,n){e.call(this,t.toExternal(),-1,n,t)}return __extends(t,e),t}(o.MirrorModel);t.AllReferences=u});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/service/lint",["require","exports","vs/nls!vs/languages/javascript/javascriptWorker2","vs/platform/markers/markers","vs/languages/typescript/lib/typescriptServices"],function(e,t,n,i,r){"use strict";var o,s=n,a=i,u=r;!function(e){function t(e){for(var t=0,n=e.childCount();n>t;t++){var i=e.childAt(t);if(i.kind()===u.TypeScript.SyntaxKind.ExportKeyword)return!0}return!1}function n(e){var t=e.fullText(),n=e.leadingTriviaWidth(),i=e.trailingTriviaWidth();return 0===n&&0===i?t:t.substr(n,t.length-(n+i))}e.isExported=t,e.text=n}(o||(o={}));var l=function(e){function t(t,n,i){e.call(this),this.filename=t,this.languageService=n,this.markers=i,this._id="id",this.severity=a.Severity.Warning}return __extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.addMarker=function(e,t,n){var i=a.createTextMarker(this.severity,0,e,t,n);this.markers.push(i)},t.prototype.isEnabled=function(e){var t=[];e.collectTextElements(t);for(var n=0,i=t.length;i>n;n++){var r=/\/\*\s*-lint(:(\w+))?\s*\*\//.exec(t[n]);if(r&&(!r[2]||r[2]===this.id))return!1}return!0},t}(u.TypeScript.PositionTrackingWalker);t.Check=l;var c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitBinaryExpression=function(n){var i=this.position();if(e.prototype.visitBinaryExpression.call(this,n),n.left instanceof u.TypeScript.TypeOfExpressionSyntax&&this.isEnabled(n)){var r=o.text(n.right),a=r.charCodeAt(0),l=r.charCodeAt(r.length-1);if(l===a&&(a===t.SQU||a===t.DQU)){var c=r.substring(1,r.length-1);switch(c){case"undefined":case"object":case"function":case"boolean":case"number":case"string":return}this.addMarker(s.localize("vs_languages_typescript_service_lint",0,c),i+n.leadingTriviaWidth(),n.width())}}},t.SQU="'".charCodeAt(0),t.DQU='"'.charCodeAt(0),t}(l);t.TypeOfCheck=c;var d=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitImportDeclaration=function(t){var n=this.position();if(e.prototype.visitImportDeclaration.call(this,t),this.isEnabled(t)){var i=n+t.importKeyword.fullWidth()+t.identifier.width()-1,r=this.languageService.getOccurrencesAtPosition(this.filename,i);1===r.length&&this.addMarker(s.localize("vs_languages_typescript_service_lint",1,t.identifier.text()),n+t.leadingTriviaWidth(),t.width())}},t}(l);t.UnusedImportCheck=d;var h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitBinaryExpression=function(t){var n=this.position();e.prototype.visitBinaryExpression.call(this,t);var i=t.operatorToken.kind();(i===u.TypeScript.SyntaxKind.EqualsEqualsToken||i===u.TypeScript.SyntaxKind.ExclamationEqualsToken)&&this.isEnabled(t)&&this.addMarker(s.localize("vs_languages_typescript_service_lint",2,i===u.TypeScript.SyntaxKind.EqualsEqualsToken?"===":"!==",t.operatorToken.text()),n+t.left.fullWidth()+t.operatorToken.leadingTriviaWidth(),t.operatorToken.width())},t}(l);t.EqualityCheck=h;var p=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitInterfaceDeclaration=function(e){this.skip(e)},t.prototype.visitParameter=function(t){var n=this.position();if(e.prototype.visitParameter.call(this,t),this.isEnabled(t)){var i=t.identifier,r=n+i.leadingTriviaWidth()+i.width()-1;this.symbolAtPositionIsBeingRead(r)||this.addMarker(s.localize("vs_languages_typescript_service_lint",3,i.text()),n,t.width())}},t.prototype.visitVariableStatement=function(t){return o.isExported(t.modifiers)?this.skip(t):e.prototype.visitVariableStatement.call(this,t)},t.prototype.visitVariableDeclarator=function(t){var n=this.position();e.prototype.visitVariableDeclarator.call(this,t);var i=t.identifier,r=n+i.leadingTriviaWidth()+i.width()-1;this.symbolAtPositionIsBeingRead(r)||this.addMarker(s.localize("vs_languages_typescript_service_lint",4,i.text()),n,t.width())},t.prototype.symbolAtPositionIsBeingRead=function(e){for(var t=this.languageService.getOccurrencesAtPosition(this.filename,e),n=0,i=0,r=t.length;r>i;i++)t[i].isWriteAccess||(n+=1);return n>0},t}(l);t.UnusedVariableCheck=p;var f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.isComment=function(e){return e.kind()===u.TypeScript.SyntaxKind.MultiLineCommentTrivia||e.kind()===u.TypeScript.SyntaxKind.SingleLineCommentTrivia},t.prototype.visitBlock=function(t){var n=this.position();if(e.prototype.visitBlock.call(this,t),this.isEnabled(t)&&!(t.statements.childCount()>0)){for(var i=0,r=t.childCount();r>i;i++){for(var o=t.childAt(i).leadingTrivia(),a=t.childAt(i).trailingTrivia(),u=0,l=o.count();l>u;u++)if(this.isComment(o.syntaxTriviaAt(u)))return;for(var u=0,l=a.count();l>u;u++)if(this.isComment(a.syntaxTriviaAt(u)))return}this.addMarker(s.localize("vs_languages_typescript_service_lint",5),n,t.width())}},t}(l);t.EmptyBlockCheck=f;var g=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitNode=function(t){t.isTypeScriptSpecific()?(this.reportAsTypeScriptSpecific(t),this.skip(t)):e.prototype.visitNode.call(this,t)},t.prototype.visitVariableStatement=function(t){o.isExported(t.modifiers)?(this.reportAsTypeScriptSpecific(t),this.skip(t)):e.prototype.visitVariableStatement.call(this,t)},t.prototype.visitFunctionDeclaration=function(t){o.isExported(t.modifiers)?(this.reportAsTypeScriptSpecific(t),this.skip(t)):e.prototype.visitFunctionDeclaration.call(this,t)},t.prototype.reportAsTypeScriptSpecific=function(e){var t=this.position();this.addMarker(s.localize("vs_languages_typescript_service_lint",6),t+e.leadingTriviaWidth(),e.width())},t}(l);t.TypeScriptSpecificCheck=g;var m=function(e){function t(){e.apply(this,arguments),this.loopStack=[]}return __extends(t,e),t.prototype.insideALoop=function(){return this.loopStack.length>0},t.prototype.visitForStatement=function(t){this.loopStack.push(t),e.prototype.visitForStatement.call(this,t),this.loopStack.pop()},t.prototype.visitWhileStatement=function(t){this.loopStack.push(t),e.prototype.visitWhileStatement.call(this,t),this.loopStack.pop()},t.prototype.visitDoStatement=function(t){this.loopStack.push(t),e.prototype.visitDoStatement.call(this,t),this.loopStack.pop()},t.prototype.visitFunctionExpression=function(t){var n=this.position();e.prototype.visitFunctionExpression.call(this,t),this.insideALoop()&&this.isEnabled(t)&&this.addMarker(s.localize("vs_languages_typescript_service_lint",7),n+t.functionKeyword.leadingTriviaWidth(),t.functionKeyword.width())},t.prototype.visitFunctionDeclaration=function(t){var n=this.position();if(e.prototype.visitFunctionDeclaration.call(this,t),this.insideALoop()&&this.isEnabled(t)){var i,r,o=s.localize("vs_languages_typescript_service_lint",8);t.identifier.width()>0?(i=n+t.functionKeyword.fullWidth()+t.identifier.leadingTriviaWidth(),r=t.identifier.width()):(i=n+t.functionKeyword.leadingTriviaWidth(),r=t.functionKeyword.width()),this.addMarker(o,i,r)}},t}(l);t.FunctionInLoopsCheck=m;var v=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitIfStatement=function(t){this.checkForEmptyStatement(t,t.statement),e.prototype.visitIfStatement.call(this,t)},t.prototype.visitElseClause=function(t){this.checkForEmptyStatement(t,t.statement),e.prototype.visitElseClause.call(this,t)},t.prototype.visitWhileStatement=function(t){this.checkForEmptyStatement(t,t.statement),e.prototype.visitWhileStatement.call(this,t)},t.prototype.visitForStatement=function(t){this.checkForEmptyStatement(t,t.statement),e.prototype.visitForStatement.call(this,t)},t.prototype.visitForInStatement=function(t){this.checkForEmptyStatement(t,t.statement),e.prototype.visitForInStatement.call(this,t)},t.prototype.checkForEmptyStatement=function(e,t){t.kind()===u.TypeScript.SyntaxKind.EmptyStatement&&this.isEnabled(t)&&this.addMarker(s.localize("vs_languages_typescript_service_lint",9),this.position()+e.leadingTriviaWidth(),e.width()+t.leadingTriviaWidth()+t.width())},t}(l);t.SemiColonInsteadOfBlockCheck=v}),define("vs/languages/typescript/service/languageServiceAdapter",["require","exports","vs/base/network","vs/base/types","vs/languages/typescript/service/lint","vs/base/strings","vs/platform/markers/markers","vs/base/filters","vs/editor/core/model/mirrorModel","vs/languages/typescript/service/textEdit","vs/languages/typescript/lib/typescriptServices","vs/languages/typescript/resources/remoteModels","vs/languages/lib/javascriptSnippets","vs/languages/typescript/service/typescriptSnippets"],function(e,t,n,i,r,o,s,a,u,l,c,d,h,p){"use strict";var f=n,g=i,m=r,v=o,y=s,b=a,_=u,E=l,C=c,w=d,S=h,T=p,k=function(){function e(e,t,n){this.host=e,this.resourceService=n,this.setLanguageService(t),this.setSuggestConfiguration({})}return e.prototype.setLanguageService=function(e){this.languageService=e},e.prototype.getLanguageSerivce=function(){return this.languageService},e.prototype.setSuggestConfiguration=function(e){this.suggestConfiguration=e},e.prototype.getExtraDiagnostic=function(e){var t=this,n=[];this.lintConfiguration.emptyBlock===!0&&n.push(m.EmptyBlockCheck),this.lintConfiguration.eqeqeq===!0&&n.push(m.EqualityCheck),this.lintConfiguration.functionsInLoops===!0&&n.push(m.FunctionInLoopsCheck),this.lintConfiguration.semiColonInsteadOfBlock===!0&&n.push(m.SemiColonInsteadOfBlockCheck),this.lintConfiguration["typeof"]===!0&&n.push(m.TypeOfCheck),this.lintConfiguration.unusedImport===!0&&n.push(m.UnusedImportCheck),this.lintConfiguration.unusedLocals===!0&&n.push(m.UnusedVariableCheck);var i=[],r=e.toExternal(),o=this.languageService.getSyntaxTree(r).sourceUnit();return n.forEach(function(e){var n=g.create(e,r,t.languageService,i);o.accept(n)}),i},e.prototype.getSyntacticDiagnostics=function(t){var n=[],i=this.languageService.getSyntacticDiagnostics(t.toExternal());return e.appendMarkersFromDiagnostics(n,i),n},e.prototype.getSemanticDiagnostics=function(t){var n=[],i=this.languageService.getSemanticDiagnostics(t.toExternal());return e.appendMarkersFromDiagnostics(n,i),n},e.appendMarkersFromDiagnostics=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push({type:"",code:-1,text:i.text(),severity:y.Severity.Error,offset:i.start(),length:i.length()})}},e.prototype.format=function(e,t,n){var i=this.resourceService.get(e),r=i.getAssociatedResource().toExternal(),o=i.getOffsetFromPosition({lineNumber:t.startLineNumber,column:t.startColumn}),s=i.getOffsetFromPosition({lineNumber:t.endLineNumber,column:t.endColumn}),a=this.languageService.getFormattingEditsForRange(r,o,s,this.createFormatOptions(n)),u=this.applyTextEdits(a,i,o,s);return u.text},e.prototype.formatAfterKeystroke=function(e,t,n){var i=this.resourceService.get(e),r=i.getAssociatedResource().toExternal(),o=i.getOffsetFromPosition(t),s=i.getOffsetFromPosition({lineNumber:t.lineNumber,column:1}),a=i.getLineContent(t.lineNumber).length,u=i.getValueInRange({startColumn:t.column,endColumn:t.column+1,startLineNumber:t.lineNumber,endLineNumber:t.lineNumber}),l=this.languageService.getFormattingEditsAfterKeystroke(r,1+o,u,this.createFormatOptions(n)),c=this.applyTextEdits(l,i,s,s+a);return c},e.prototype.createFormatOptions=function(e){var t=new C.Services.FormatCodeOptions;return t.ConvertTabsToSpaces=e.insertSpaces,t.TabSize=e.tabSize,t.IndentSize=e.tabSize,t.InsertSpaceAfterCommaDelimiter=!0,t.InsertSpaceBeforeAndAfterBinaryOperators=!0,t.InsertSpaceAfterSemicolonInForStatements=!0,t},e.prototype.applyTextEdits=function(e,t,n,i){for(var r,o=E.create(t),s=0;s<e.length;s++)o.replace(e[s].minChar,e[s].limChar-e[s].minChar,e[s].text),n=Math.min(n,e[s].minChar),i=Math.max(i,e[s].limChar);return r=o.apply(),r=r.substring(n,i+(r.length-t.getValue().length)),{text:r,range:this.rangeFromMinAndLim({minChar:n,limChar:i},t)}},e.prototype.getActionsAtPosition=function(e,t){var n=this.resourceService.get(e),i=n.getAssociatedResource().toExternal(),r=n.getOffsetFromPosition(t),o=[],s=this.languageService.getSyntaxTree(i),a=s.sourceUnit().findToken(r);if(a.kind()!==C.TypeScript.SyntaxKind.IdentifierName)return o;var u=this.languageService.getTypeAtPosition(i,r);return u&&""!==u.memberName.toString()&&"any"!==u.memberName.toString()?(o.push("editor.actions.rename"),o.push("editor.actions.referenceSearch.trigger"),o.push("editor.actions.previewDeclaration"),o.push("editor.actions.goToDeclaration"),o):o},e.prototype.getOutline=function(e){var t=this,n=this.resourceService.get(e),i=n.getAssociatedResource().toExternal(),r=this.languageService.getScriptLexicalStructure(i),o=[],s=[];return r.filter(function(e){switch(e.kind){case C.Services.ScriptElementKind.unknown:case C.Services.ScriptElementKind.scriptElement:case C.Services.ScriptElementKind.enumElement:return!1}return i!==e.fileName?!1:i===e.name?!1:!0}).sort(function(e,t){return e.minChar-t.minChar}).map(function(e){var i={label:e.name,type:e.kind,range:t.rangeFromMinAndLim(e,n),children:[]};return i}).forEach(function(e){for(;;){var n=s[s.length-1];if(!n){s.push(e),o.push(e);break}if(t.isSubRange(n.range,e.range)){n.children.push(e),s.push(e);break}s.pop()}}),o},e.prototype.getNavigateToItems=function(t){for(var n,i=this.host.getScriptFileNames(),r=[],o=0;o<i.length;o++){n=this.languageService.getScriptLexicalStructure(i[o]);for(var s=0;s<n.length;s++){var a=n[s],u=e.FILTER(t,n[s].name);if(u){var l=this.resourceService.get(new f.URL(a.fileName));l&&!this.isBaseLibModel(l)&&r.push({containerName:a.containerName,name:a.name,type:a.kind,matchKind:a.matchKind,resourceUrl:l.getAssociatedResource().toExternal(),range:this.rangeFromMinAndLim(a,l)})}}}return r},e.prototype.findOccurrences=function(e,t){var n=this,i=this.resourceService.get(e),r=i.getAssociatedResource().toExternal(),o=i.getOffsetFromPosition(t),s=this.languageService.getOccurrencesAtPosition(r,o),a=s.map(function(e){return{kind:e.isWriteAccess?"write":null,range:n.rangeFromMinAndLim(e,i)}});return a},e.prototype.findDeclaration=function(e,t){var n=this.resourceService.get(e),i=n.getAssociatedResource().toExternal(),r=n.getOffsetFromPosition(t),o=this.languageService.getDefinitionAtPosition(i,r);if(!o||0===o.length)return null;var s=o[0];if(!s.fileName)return null;var a=this.resourceService.get(new f.URL(s.fileName));if(this.isBaseLibModel(a))return null;var u={resourceUrl:a.getAssociatedResource().toExternal(),range:this.rangeFromMinAndLim(s,a,!0),preview:this.preview(a,s.minChar,s.limChar)};return u},e.prototype.findTypeDeclaration=function(){return null},e.prototype.isExternallyVisibleSymbole=function(e,t){var n=this.resourceService.get(e),i=n.getOffsetFromPosition(t),r=n.getAssociatedResource().toExternal(),o=this.languageService.getTypeAtPosition(r,i);if(!o)return!0;switch(o.kind){case C.Services.ScriptElementKind.localVariableElement:case C.Services.ScriptElementKind.localFunctionElement:case C.Services.ScriptElementKind.parameterElement:return!1}return!0},e.prototype.findReferences=function(e,t){var n=this,i=this.resourceService.get(e),r=i.getOffsetFromPosition(t),o=i.getAssociatedResource().toExternal(),s=this.languageService.getReferencesAtPosition(o,r),a=s.filter(function(e){return!n.isBaseLibModel(n.resourceService.get(new f.URL(e.fileName)))}).map(function(e){var t=n.resourceService.get(new f.URL(e.fileName)),i={resourceUrl:t.getAssociatedResource().toExternal(),range:n.rangeFromMinAndLim(e,t),preview:n.preview(t,e.minChar,e.limChar)};return i});return a},e.prototype.getTypeInformationAtPosition=function(e,t){var n=this.resourceService.get(e),i=n.getOffsetFromPosition(t),r=n.getAssociatedResource().toExternal(),o=this.languageService.getTypeAtPosition(r,i);if(!o)return null;var s=[];s.push({className:"type",text:o.memberName.toString()}),s.push({className:"documentation",text:o.docComment});var a={value:"",htmlContent:s,className:"typeInfo ts",range:this.rangeFromMinAndLim(o,n)};return a},e.prototype.getRangesToPosition=function(e,t){for(var n=this.resourceService.get(e),i=n.getOffsetFromPosition(t),r=n.getAssociatedResource().toExternal(),o=this.languageService.getSyntaxTree(r),s=o.sourceUnit().findToken(i),a=[];null!==s;)a.unshift({type:"node",range:this.rangeFromMinAndLim({minChar:s.start(),limChar:s.end()},n)}),s=s.parent();return a},e.append=function(e,t,n){var i=n.type+n.label+n.codeSnippet;t[i]||(t[i]=!0,e.push(n))},e.prototype.suggest=function(t,n){var i=this.resourceService.get(t),r=t.toExternal(),o=i.getWordUntilPosition(n),s=i.getOffsetFromPosition(n),a=s-o.length,u="."===i.getValue().charAt(a-1),l=[],c=this.languageService.getCompletionsAtPosition(r,a,u);if(c){u=c.isMemberCompletion;var d={};c.entries.forEach(function(t){t.name&&t.kind&&e.append(l,d,{type:e.convertScriptElementKindToSuggestionType(t.kind),label:t.name,codeSnippet:t.name})})}var h=!u,p=this.suggestConfiguration.alwaysAllWords||!c||0===c.entries.length;return p&&i.getAllUniqueWords(o).filter(function(e){return!/^-?\d*\.?\d/.test(e)}).forEach(function(e){var t={type:"text",label:e,codeSnippet:e};l.push(t)}),h&&(l.push.apply(l,S.snippets),l.push.apply(l,T.snippets)),l},e.prototype.getSuggestionDetails=function(t,n,i){var r=this.resourceService.get(t),o=t.toExternal(),s=r.getOffsetFromPosition(n),a=this.languageService.getCompletionEntryDetails(o,s,i.label);if(!a)return i;if(i.typeLabel=a.type,i.documentationLabel=a.docComment,this.suggestConfiguration.useCodeSnippetsOnMethodSuggest&&"function"===i.type){var u=e.parseMethodSignature(a.type),l=u.arguments.map(function(e){return"{{"+e.name.trim()+"}}"}),c=a.name;c+=l.length>0?"("+l.join(", ")+"){{}}":"()",i.codeSnippet=c}return i},e.convertScriptElementKindToSuggestionType=function(e){switch(e){case C.Services.ScriptElementKind.primitiveType:case C.Services.ScriptElementKind.keyword:return"keyword";case C.Services.ScriptElementKind.variableElement:case C.Services.ScriptElementKind.localVariableElement:case C.Services.ScriptElementKind.memberVariableElement:case C.Services.ScriptElementKind.memberGetAccessorElement:case C.Services.ScriptElementKind.memberSetAccessorElement:return"field";case C.Services.ScriptElementKind.functionElement:case C.Services.ScriptElementKind.memberFunctionElement:case C.Services.ScriptElementKind.constructSignatureElement:case C.Services.ScriptElementKind.callSignatureElement:return"function"}return e},e.prototype.quickFix=function(t,n){var i=this.resourceService.get(t),r=i.getAssociatedResource().toExternal(),o=i.getOffsetFromPosition(n),s=i.getWordUntilPosition(n),a=o-s.length,u="."===i.getValue().charAt(a-1),l=this.languageService.getCompletionsAtPosition(r,a,u),c=[];return l.entries.forEach(function(t){var n=v.difference(s,t.name);n<s.length/2||c.push({type:e.convertScriptElementKindToSuggestionType(t.kind),label:t.name,codeSnippet:t.name,score:n})}),c.sort(function(e,t){return t.score-e.score}),c.slice(0,3)},e.parseMethodSignature=function(e){var t,n,i,r=[],o="",s="",a=!0,u=1;for(t=1,n=e.length;n>t;t++)if(i=e.charAt(t),")"===i&&u--,"("===i&&u++,1!==u||":"!==i)if(1!==u||","!==i){if(0===u&&")"===i){""!==o&&r.push({name:o,type:s});break}a?o+=i:s+=i}else r.push({name:o,type:s}),o="",s="",a=!0;else a=!1;return{arguments:r,flatArguments:e.substr(0,t+1),flatReturnType:e.substr(t+5)}},e.prototype.getParameterHints=function(t,n){var i=this.resourceService.get(t),r=i.getOffsetFromPosition(n),o=i.getAssociatedResource().toExternal(),s=this.languageService.getSignatureAtPosition(o,r);if(!s)return null;var a={currentSignature:Math.max(0,s.activeFormal),currentParameter:Math.max(0,s.actual.currentParameter),signatures:s.formal.map(function(t){return e.transformSignature(t)})};return a},e.transformParameter=function(e){return{label:e.name,documentation:e.docComment,signatureLabelOffset:e.minChar,signatureLabelEnd:e.limChar}},e.transformSignature=function(t){return{label:t.signatureInfo,documentation:t.docComment,parameters:t.parameters.map(function(t){return e.transformParameter(t)})}},e.prototype.getEmitOutput=function(e,t){var n=this.languageService.getEmitOutput(e.toExternal()),i=n.outputFiles;if(!i)return null;for(var r=0,o=i.length;o>r;r++)if(v.endsWith(i[r].name,t))return i[r].text;return null},e.prototype.isBaseLibModel=function(e){return e instanceof w.DefaultLibModel},e.prototype.rangeFromMinAndLim=function(e,t,n){"undefined"==typeof n&&(n=!1);var i=e.minChar,r=e.limChar-e.minChar;r=Math.max(1,r);var o={};return o.startLineNumber=t.getLineNumberFromOffset(i),o.startColumn=1+i-t.getLineStart(o.startLineNumber),n?(o.endLineNumber=o.startLineNumber,o.endColumn=o.startColumn):(o.endLineNumber=t.getLineNumberFromOffset(i+r),o.endColumn=1+i+r-t.getLineStart(o.endLineNumber)),o},e.prototype.preview=function(e,t,n,i){"undefined"==typeof i&&(i=200);for(var r,o=this.languageService.getSyntaxTree(e.getAssociatedResource().toExternal()),s=o.sourceUnit().findToken(t);s&&!r;)s.fullWidth()>i&&(r=s),s=s.parent();r||(r=o.sourceUnit().findToken(t).root());var a=e.getValue().substring(r.fullStart(),r.fullEnd()),u=new _.MirrorModel("__temp_model_",0,a),l=t-r.fullStart(),c=n-t,d=u.getLineNumberFromOffset(l),h=1+l-u.getLineStart(d),p=u.getLineNumberFromOffset(l+c),f=1+(l+c)-u.getLineStart(p);return u.dispose(),{text:a,range:{startLineNumber:d,startColumn:h,endLineNumber:p,endColumn:f}}},e.prototype.isSubRange=function(e,t){return e.startLineNumber>t.startLineNumber||e.endLineNumber<t.endLineNumber?!1:e.startLineNumber===t.startLineNumber&&e.startColumn>t.startColumn?!1:e.endLineNumber===t.endLineNumber&&e.endColumn<t.endColumn?!1:!0},e.FILTER=b.or(b.matchesPrefix,b.matchesContiguousSubString,b.matchesCamelCase),e}();t.LanguageServiceAdapter=k});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/service/languageServiceHost2",["require","exports","vs/base/collections","vs/languages/typescript/lib/typescriptServices"],function(e,t,n,i){"use strict";var r=n,o=i,s=function(){function e(){this.logger=console.warn}return e.prototype.information=function(){return this.logger=console.log,!0},e.prototype.debug=function(){return this.logger=console.log,!0},e.prototype.warning=function(){return this.logger=console.warn,!0},e.prototype.error=function(){return this.logger=console.error,!0},e.prototype.fatal=function(){return this.logger=console.error,!0},e.prototype.log=function(){},e}();t.ConsoleLogger=s;var a=function(){function e(e){this.model=e,this.versionId=e.versionId,this.open=!1,this.value=e.getValue(),this.length=this.value.length,this.changeRange=new o.TypeScript.TextChangeRange(new o.TypeScript.TextSpan(0,this.length),this.length)}return e.prototype.getText=function(e,t){return this.value.substring(e,t)},e.prototype.getLength=function(){return this.length},e.prototype.getLineStartPositions=function(){if(!this.lineStarts){this.lineStarts=[];for(var e=0,t=this.model.getLineCount();t>e;e++)this.lineStarts.push(this.model.getLineStart(e+1))}return this.lineStarts},e.prototype.getTextChangeRangeSinceVersion=function(){return null},e}(),u=function(e){function t(){e.call(this),this._compilationSettings=new o.TypeScript.CompilationSettings,this._resourceSet=new r.StringDictionary}return __extends(t,e),t.prototype.updateResources=function(e){for(var t=0,n=e.length;n>t;t++){var i=e[t],r=i.toExternal(),o=this._resourceService.get(i);if(o){var s=o.versionId;this._resourceSet.containsKey(r)&&this._resourceSet.get(r).versionId===s||this._resourceSet.add(r,new a(o))}else console.warn(i.toExternal()+" NOT found"),this._resourceSet.remove(r)}},Object.defineProperty(t.prototype,"resourceService",{set:function(e){this._resourceService=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"compilationSettings",{set:function(e){this._compilationSettings=e},enumerable:!0,configurable:!0}),t.prototype.isScriptFileName=function(e){return this._resourceSet.containsKey(e)},t.prototype.getCompilationSettings=function(){return this._compilationSettings},t.prototype.getScriptFileNames=function(){return this._resourceSet.keys.toArray()
},t.prototype.getScriptVersion=function(e){return this._resourceSet.get(e).versionId},t.prototype.getScriptIsOpen=function(){return!0},t.prototype.getLocalizedDiagnosticMessages=function(){return null},t.prototype.getScriptByteOrderMark=function(){return ByteOrderMark.None},t.prototype.getScriptSnapshot=function(e){return this._resourceSet.get(e)},t.prototype.getDiagnosticsObject=function(){return this},t}(s);t.LanguageServiceHost=u}),define("vs/languages/typescript/resources/moduleConfiguration",["require","exports"],function(e,t){"use strict";var n=function(){function e(e,t){this.requestService=e,this.configuration=t}return e.prototype.setConfiguration=function(e){this.configuration=e},e.prototype.getModuleConfiguration=function(e){var t="",n="/",i=Object.keys(this.configuration),r=this.requestService.getPath("root",e);i.sort(function(e,t){return t.length-e.length});for(var o=0;!t&&o<i.length;o++){var s=i[o];0===r.indexOf(s)&&(t=this.configuration[s].type,n=s)}return{baseurl:n,moduleType:t}},e}();t.ModuleSystemConfigurations=n});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/service/references",["require","exports","../lib/typescriptServices","vs/base/objects","vs/base/lib/winjs.base"],function(e,t,n,i,r){"use strict";function o(e,t){var n=e.nodes().filter(function(e){return!t.hasOwnProperty(e.getName())});return 0===n.length?null:(n.sort(function(e,t){var n=e.getIncoming().length-t.getIncoming().length;return 0===n&&(n=t.getOutgoing().length-e.getOutgoing().length),0===n&&(n=e.getName().localeCompare(t.getName())),n}),n[0])}function s(e){for(var t,n,i=[],r={};null!==(t=o(e,r));)e.traverse(t.getName(),function(e){n=e.getName(),r[n]||(r[n]=!0,i.unshift(e))});return i}function a(e,n,i){var r,o,s=new f,a=new _;return n=n.slice(0),n.sort(function(e,t){return t.references.length-e.references.length}),new h.Promise(function(u){function l(){return 0===n.length?(u(s),void 0):(r=n.shift(),(o=s.hasNode(i.nodeName(r.path)))?l():(r.resolve(e,a.consume.bind(a),i).then(function(){t.fillGraph(s,s.insertNode(i.nodeName(r.path)),i,r),l()}),void 0))}l()})}function u(e,n,i,r){r.references.forEach(function(o){if(o.error&&!o.file){var s={message:o.error.message,path:i.nodeName(r.path),offset:o.offset,length:o.length,referenceType:o instanceof m?1:2};e.insertEdge(n.getName(),"error:"+JSON.stringify(s))}else if(o.file){var a=e.insertEdge(n.getName(),i.nodeName(o.file.path));o.error||t.fillGraph(e,a,i,o.file)}})}function l(e){return(new _).consume(e)}var c=n,d=i,h=r,p=function(){function e(e){this.name=e,this.outgoing={},this.incoming={}}return e.prototype.getName=function(){return this.name},e.prototype.getOutgoing=function(){return Object.keys(this.outgoing)},e.prototype.getIncoming=function(){return Object.keys(this.incoming)},e}(),f=function(){function e(){this.store={}}return e.prototype.clone=function(){var t=new e;return t.store=d.clone(this.store),t},e.prototype.merge=function(e){var t=this;if(this!==e){var n=Object.keys(e.store);n.forEach(function(e){t.hasNode(e)||t.insertNode(e)}),n.forEach(function(n){var i=e.store[n];i.getOutgoing().forEach(function(e){t.insertEdge(n,e)})})}},e.prototype.isEmpty=function(){return 0===Object.keys(this.store).length},e.prototype.hasNode=function(e){return this.store.hasOwnProperty(e)},e.prototype.insertNode=function(e){var t=new p(e);return this.store[e]=t,t},e.prototype.insertEdge=function(e,t){return this.hasNode(e)||this.insertNode(e),this.hasNode(t)||this.insertNode(t),this.store[e].outgoing[t]=!0,this.store[t].incoming[e]=!0,this.store[t]},e.prototype.removeEdges=function(e){for(var t=[],n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];if(this.hasNode(e)){var i,r,o=this.store[e],s=t.length;for(0===t.length&&(t=Object.keys(o.outgoing),s=t.length),i=0;s>i;i++)this.store.hasOwnProperty(t[i])&&(r=this.store[t[i]],delete o.outgoing[r.name],delete r.incoming[e])}},e.prototype.removeNode=function(e){var t=this;return this.store.hasOwnProperty(e)?(delete this.store[e],Object.keys(this.store).forEach(function(n){var i=t.store[n];delete i.incoming[e],delete i.outgoing[e]}),!0):!1},e.prototype.nodes=function(){var e=this;return Object.keys(this.store).map(function(t){return e.store[t]})},e.prototype.node=function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},e.prototype.traverse=function(e,t,n){"undefined"==typeof n&&(n={});var i=this;if(this.store.hasOwnProperty(e)&&n[e]!==!0){n[e]=!0;var r=this.store[e];t(r),Object.keys(r.outgoing).forEach(function(e){i.traverse(e,t,n)})}},e.prototype.toJSON=function(){for(var e=Object.keys(this.store),t={},n={},i=[],r=0;r<e.length;r++){var o=e[r];t[o]=r,n[r]=o}for(var r=0;r<e.length;r++){var o=e[r],s=this.store[o].getOutgoing();i.push(r),i.push(s.length);for(var a=0;a<s.length;a++){var u=s[a],l=t[u];i.push(l)}}return{i:n,g:i}},e.fromJSON=function(t){var n,i,r=new e;for(var o in t.i)t.i.hasOwnProperty(o)&&(n=t.i[o],r.insertNode(n));for(var s=0,a=t.g.length;a>s;s++)for(n=t.i[t.g[s]],i=t.g[++s];i>0;)r.insertEdge(n,t.i[t.g[++s]]),i-=1;return r},e}();t.Graph=f,t.computeTransitiveClosure=s,t.buildDependencyGraph=a,t.fillGraph=u;var g=function(){function e(e,t,n){this.offset=e,this.length=t,this.path=n}return e}();t.Reference=g;var m=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.REGEXP=/^(\/\/\/\s*<reference\s+path=)('|")(.+?)\2\s*(static=('|")(.+?)\2\s*)*/im,t}(g);t.TripleSlashReference=m;var v=function(e){function t(t,n,i){e.call(this,t,n,i),this.isRelative=0===this.path.indexOf("./")||0===this.path.indexOf("../"),this.isRooted=0===this.path.indexOf("/"),this.isAbsolute=!this.isRelative&&!this.isRooted}return __extends(t,e),t.TS=".ts",t.DTS=".d.ts",t}(g);t.ImportReference=v;var y=function(){function e(e,t){this.path=e,this.content=t,this.references=[]}return e.prototype.resolve=function(t,n,i,r){"undefined"==typeof r&&(r={});var o=this;return this.references=n(this.content),r[this.path]=!0,new h.Promise(function(s,a){var u=o.references.length,l=function(){0===--u&&s(null)},c=function(){u+=1};return 0===u?(s(null),void 0):(o.references.forEach(function(s){t.load(o.path,s,i).then(function(o){o&&r[o.path]?(s.file=o,s.error={message:"cyclic reference",path:o.path}):(s.file=o,i.recursive&&s.file instanceof e&&(c(),o.resolve(t,n,i,r).then(function(){l()},a))),l()},function(e){s.error=e,l()})}),void 0)})},e}();t.File=y;var b=function(){function e(e){this.value=e;var t=c.TypeScript.SimpleText.fromString(e);this.scanner=new c.TypeScript.Scanner(null,t,c.TypeScript.LanguageVersion.EcmaScript5),this.nextTokens=[],this.offset=0}return e.prototype.next=function(){if(0===this.nextTokens.length){var e=this.scanner.scan([],!0),t=e.leadingTrivia(),n=e.trailingTrivia();this.scanner.absoluteIndex();for(var i=0,r=t.count();r>i;i++){var o=t.syntaxTriviaAt(i);this.add(o.kind(),this.offset,o.fullWidth(),o.fullText()),this.offset+=o.fullWidth()}this.add(e.kind(),this.offset,e.width(),e.valueText()),this.offset+=e.width();for(var i=0,r=n.count();r>i;i++){var o=n.syntaxTriviaAt(i);this.add(o.kind(),this.offset,o.fullWidth(),o.fullText()),this.offset+=o.fullWidth()}}return this.nextTokens.shift()},e.prototype.add=function(e,t,n,i){switch(e){case c.TypeScript.SyntaxKind.WhitespaceTrivia:case c.TypeScript.SyntaxKind.NewLineTrivia:return}this.nextTokens.push({kind:e,offset:t,length:n,text:i})},e}(),_=function(){function e(){this.references=[]}return e.prototype.consume=function(e){function t(){return n=r.next()}for(var n,i=this.references.length,r=new b(e);t().kind!==c.TypeScript.SyntaxKind.EndOfFileToken;)if(n.kind===c.TypeScript.SyntaxKind.ImportKeyword){if(t(),n.kind===c.TypeScript.SyntaxKind.IdentifierName&&(t(),n.kind===c.TypeScript.SyntaxKind.EqualsToken&&(t(),n.kind===c.TypeScript.SyntaxKind.ModuleKeyword&&(t(),n.kind===c.TypeScript.SyntaxKind.OpenParenToken&&(t(),n.kind===c.TypeScript.SyntaxKind.StringLiteral))))){var o=n.text,s=n.offset,a=n.length;t(),n.kind===c.TypeScript.SyntaxKind.CloseParenToken&&this.references.push(new v(s+1,-2+a,o))}}else if(n.kind===c.TypeScript.SyntaxKind.SingleLineCommentTrivia){var u=n.text,s=n.offset,a=n.length,l=m.REGEXP.exec(u);l&&this.references.push(new m(s+l[1].length+l[2].length,l[3].length,l[3]))}return this.references.slice(i)},e}();t.ScannerBasedCollector=_,t.collect=l});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/resources/referenceCollection",["require","exports","vs/languages/typescript/service/references","vs/editor/worker/resourceService","vs/base/lib/winjs.base","vs/base/eventEmitter","vs/editor/core/constants"],function(e,t,n,i,r,o,s){"use strict";var a=n,u=r,l=o,c=s,d=function(e){function t(t,n){e.call(this),this.target=t,this.throttleDelay=n,this.throttle=u.Promise.as(null)}return __extends(t,e),t.prototype.onChange=function(e){var t=this,n=e.some(function(e){switch(e.getType()){case c.EventType.ModelContentChangedLineChanged:case c.EventType.ModelContentChangedLinesInserted:case c.EventType.ModelContentChangedLinesDeleted:case c.EventType.ModelContentChangedFlush:return!0;default:return!1}});n||(this.throttle.cancel(),this.throttle=u.Promise.timeout(this.throttleDelay),this.throttle.then(function(){t.onContentChange()}))},t.prototype.onContentChange=function(){throw new Error("implement me")},t}(l.EventEmitter);t.MirrorModelListener=d;var h=function(e){function t(t){e.call(this,t,500),this.references=a.collect(this.target.getValue()),this.referencesVersionId=this.target.versionId}return __extends(t,e),t.prototype.needsUpdate=function(){return this.graph?this.referencesVersionId>this.graphVersionId?!0:!1:!0},t.prototype.setGraph=function(e,t){this.graph=e,this.graphVersionId=t},t.prototype.getGraph=function(){return this.graph},t.prototype.getReferences=function(){return this.references},t.prototype.onContentChange=function(){function e(e){return e.path+e.offset+e.length}var n=a.collect(this.target.getValue()),i=!1;if(n.length!==this.references.length)i=!0;else{var r={};this.references.forEach(function(t){r[e(t)]=!0}),i=n.some(function(t){return!r[e(t)]})}i&&(this.references=n,this.referencesVersionId=this.target.versionId,this.emit(t.EVENTS.OnReferencesChanged,{resource:this.target.getAssociatedResource()}))},t.NAME="typescript.ReferencesState",t.EVENTS={OnReferencesChanged:"onReferencesChanged"},t}(d);t.ReferencesState=h}),define("vs/languages/typescript/resources/dependencyResolverDummy",["require","exports","vs/nls!vs/languages/javascript/javascriptWorker2","vs/base/lib/winjs.base","vs/base/lifecycle","vs/languages/typescript/service/references","vs/editor/core/model/mirrorModel","vs/platform/markers/markers","./referenceCollection"],function(e,t,n,i,r,o,s,a,u){"use strict";var l=n,c=i,d=r,h=o,p=s,f=a,g=u,m=function(){function e(e,t){this.resourceService=e,this.markerService=t,this.callOnDispose=[]}return e.prototype.fetchDependencies=function(e){var t=this,n=this.resourceService.get(e);if(!(n instanceof p.MirrorModel))return c.Promise.as([]);var i=n,r=this.resourceService.getLinked(e,g.ReferencesState.NAME);return r||(r=new g.ReferencesState(i),this.resourceService.insertLinked(e,g.ReferencesState.NAME,r),this.callOnDispose.push(r.addListener(g.ReferencesState.EVENTS.OnReferencesChanged,function(e){return t.onReferenceStateChanged(e)})),this.onReferenceStateChanged({resource:e})),c.Promise.as([])},e.prototype.onReferenceStateChanged=function(t){var n=this;this.markerService.createPublisher().changeMarkers(t.resource,e.ID,function(e){for(var i=n.resourceService.getLinked(t.resource,g.ReferencesState.NAME),r=i.getReferences(),o=0,s=r.length;s>o;o++)r[o]instanceof h.TripleSlashReference&&e.addMarker(f.createTextMarker(f.Severity.Error,1,l.localize("vs_languages_typescript_resources_dependencyResolverDummy",0),r[o].offset,r[o].length))})},e.prototype.dispose=function(){d.cAll(this.callOnDispose)},e.ID="typescript.dependency.nullResolver",e}();t.DummyDependencyResolver=m}),define("vs/languages/typescript/resources/dependencyResolver",["require","exports","vs/base/lib/winjs.base","vs/base/types"],function(e,t,n,i){"use strict";var r=n,o=i;!function(e){e.OnReferencesChanged="onReferencesChanged"}(t.Events||(t.Events={})),t.Events;var s=function(){function e(){}return e.prototype.fetchDependencies=function(){return r.Promise.as([])},e}();t.NullDependencyResolver=s;var a=function(){function e(e){this.delegates=e}return e.prototype.fetchDependencies=function(e){var t=this.delegates.map(function(t){return t.fetchDependencies(e)});return r.Promise.join(t).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push.apply(t,i)}return t})},e.prototype.dispose=function(){for(var e=0;e<this.delegates.length;e++){var t=this.delegates[e];o.isFunction(t.dispose)&&t.dispose()}},e}();t.CompositeDependencyResolver=a});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/resources/dependencyResolverFiles",["require","exports","vs/base/lib/winjs.base","vs/base/network","vs/base/eventEmitter","vs/base/arrays","vs/base/lifecycle","./remoteModels","./referenceCollection","../service/references","vs/editor/core/model/mirrorModel","./dependencyResolver","vs/platform/markers/markers"],function(e,t,n,i,r,o,s,a,u,l,c,d,h){"use strict";var p,f=n,g=i,m=r,v=o,y=s,b=a,_=u,E=l,C=c,w=d,S=h;!function(e){function t(e){return e.replace(/\\/g,"/")}function n(e){var t=e.lastIndexOf("/");return-1===t?e:e.substring(0,t)}function i(){for(var e=[],t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];for(var n=[],i=0;i<e.length;i++)n.push.apply(n,e[i].split("/"));for(var i=0;i<n.length;i++){var r=n[i];"."===r?(n.splice(i,1),i-=1):i>0&&".."===r&&(n.splice(i-1,2),i-=2)}return n.join("/")}e.normalize=t,e.dirname=n,e.join=i}(p||(p={}));var T=function(){function e(e,t){this.resourceService=e,this.requestService=t}return e.prototype.load=function(e,t){var n=this;if(!(t instanceof E.TripleSlashReference))return f.Promise.wrapError("only triple slash references are supported");var i=new g.URL(p.join(p.dirname(e),p.normalize(t.path))),r=this.requestService.getPath("root",i),o=new g.URL(this.requestService.getRequestUrl("root",r,!0));if(this.resourceService.contains(o)){var s=this.resourceService.get(o);return f.Promise.as(new E.File(o.toExternal(),s.getValue()))}return this.requestService.makeRequest({url:o.toExternal()}).then(function(e){var t=new E.File(o.toExternal(),e.responseText),i=new b.RemoteModel(o,e.responseText);return n.resourceService.contains(o)||n.resourceService.insert(o,i),t})},e.prototype.dispose=function(){},e}(),k=function(e){function t(t,n,i){e.call(this),this.resourceService=t,this.requestService=n,this.markerService=i,this.callOnDispose=[],this.fileLoader=new T(t,n),this.loadRecursivelyValue=!0}return __extends(t,e),t.prototype.dispose=function(){y.cAll(this.callOnDispose)},t.prototype.loadRecursively=function(e){return"undefined"!=typeof e&&(this.loadRecursivelyValue=e),this.loadRecursivelyValue},t.prototype.fetchDependencies=function(e){var t=this;if(!e||e.getScheme()===g.schemas.inMemory)return f.Promise.as([]);var n=this.resourceService.get(e);if(!(n instanceof C.MirrorModel))return f.Promise.as([]);var i=n,r=this.resourcesFromReferenceState(i);if(r)return f.Promise.as(r);var o=this.resourceService.getLinked(e,_.ReferencesState.NAME),s=new E.File(e.toExternal(),i.getValue()),a=i.versionId;return E.buildDependencyGraph(this.fileLoader,[s],{recursive:this.loadRecursively(),nodeName:function(e){return e}}).then(function(n){var i=[];return n.nodes().forEach(function(e){if(0===e.getName().indexOf("error:")){n.removeNode(e.getName());var t=JSON.parse(e.getName().substring(6));i.push(t)}}),t.markerService.createPublisher().batchChanges(function(e){for(var n=0,r=i.length;r>n;n++){var o=i[n];if(1===o.referenceType){var s=new g.URL(t.requestService.getRequestUrl("root",o.path,!0)),a=S.createTextMarker(S.Severity.Error,1,o.message,o.offset,o.length);e.changeMarkers(s,function(e){e.addMarker(a)})}}}),o.setGraph(n,a),t.resourcesFromGraph(n,e)})},t.prototype.resourcesFromReferenceState=function(e){var t=this,n=e.getAssociatedResource(),i=this.resourceService.getLinked(n,_.ReferencesState.NAME);return i?i.needsUpdate()?null:this.resourcesFromGraph(i.getGraph(),n):(i=new _.ReferencesState(e),this.callOnDispose.push(i.addListener(_.ReferencesState.EVENTS.OnReferencesChanged,function(e){return t.onReferenceStateChanged(e)})),this.resourceService.insertLinked(n,_.ReferencesState.NAME,i),null)},t.prototype.onReferenceStateChanged=function(e){this.emit(w.Events.OnReferencesChanged,e)},t.prototype.resourcesFromGraph=function(e,t){var n=[];return e.traverse(t.toExternal(),function(e){n.unshift(new g.URL(e.getName()))}),n.pop(),n},t.ID="typescript.resolver.file",t}(m.EventEmitter);t.FileBasedResolver=k;var x=function(){function t(e,t,n){this.resourceService=e,this.requestService=t,this.delegate=n,this.baselibs=[]}return t.prototype.setBaselibs=function(e){this.baselibs=e},t.prototype.fetchDependencies=function(){var n=this,i=[];return this.baselibs.forEach(function(r){n.resourceService.contains(r)?i.push(f.Promise.as(r)):0===r.toExternal().indexOf(t.MODULE_PREFIX)?i.push(new f.Promise(function(t){e([r.toExternal()],function(e){var i=new b.DefaultLibModel(r,e);n.resourceService.insert(r,i),t(r)})})):i.push(n.requestService.makeRequest({url:r.toExternal()}).then(function(e){var t=new b.DefaultLibModel(r,e.responseText);return n.resourceService.insert(r,t),r},function(){return console.warn("TS - "+r.toExternal()+" can not be loaded as base lib"),null}))}),f.Promise.join(i).then(function(e){return i=[],e.forEach(function(e){e&&i.push(n.delegate.fetchDependencies(e).then(function(t){return t.push(e),t}))}),f.Promise.join(i)}).then(function(e){return v.merge(e)})},t.MODULE_PREFIX="vs/text!",t}();t.BaselibDependencyResolver=x;var L=function(){function e(e,t,n,i){this.projectFile=e,this.resourceService=t,this.requestService=n,this.delegate=i,this.loadFailureCount=0}return e.prototype.fetchDependencies=function(){var e,t=this;return this.loadFailureCount>=3?f.Promise.as([]):(e=this.resourceService.contains(this.projectFile)?f.Promise.as(this.projectFile):this.requestService.makeRequest({url:this.projectFile.toExternal()}).then(function(e){var n=new b.DefaultLibModel(t.projectFile,e.responseText);return t.resourceService.insert(t.projectFile,n),t.projectFile},function(e){throw t.loadFailureCount++,e}),e.then(function(){return t.delegate.fetchDependencies(t.projectFile)},function(){return f.Promise.as([])}))},e}();t.ProjectFileDependencyResolver=L});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/resources/dependencyResolverGraph",["require","exports","vs/base/lib/winjs.base","vs/base/strings","vs/base/env","vs/base/network","vs/editor/core/model/mirrorModel","./remoteModels","./referenceCollection","../service/references","./dependencyResolverFiles","vs/platform/markers/markers"],function(e,t,n,i,r,o,s,a,u,l,c,d){"use strict";var h,p=n,f=i,g=r,m=o,v=s,y=a,b=u,_=l,E=c,C=d;!function(e){function t(e){for(var t,n,i=0,r={};;){if(t=e.indexOf(":",i),n=e.indexOf("\n",t+1),0>t||0>n)break;r[e.substring(i,t).trim()]=e.substring(t+1,n).trim(),i=n+1}return r}function n(e,n){function i(e){if(l)return o("canceled"),void 0;var n=e.indexOf("\r\n\r\n",a);if(-1!==n){var r=t(e.substring(a,n)),c=Number(r["Content-Length"]);n+4+c>e.length||(u.push({header:r,body:e.substr(n+4,c)}),s(u[u.length-1]),a=n+4+c,i(e))}}var r,o,s,a=0,u=[],l=!1,c=new p.Promise(function(e,t,n){r=e,o=t,s=n},function(){l=!0});return e.makeRequest(n).then(function(e){i(e.responseText),r(u)},function(e){o(e)},function(e){g.browser.isIE10||3===e.readyState&&i(e.responseText)}).done(null,function(e){o(e)}),c}e.parseHeader=t,e.fetchChunkedData=n}(h||(h={}));var w=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.setModuleSystems=function(e){this.modules=e},t.prototype.onReferenceStateChanged=function(e){var t=this;"undefined"!=typeof this.delayHandle&&clearTimeout(this.delayHandle),this.delayHandle=setTimeout(function(){t.superOnReferenceStateChanged(e)},1e3)},t.prototype.superOnReferenceStateChanged=function(t){e.prototype.onReferenceStateChanged.call(this,t)},t.prototype.fetchDependencies=function(t){var n=this;if(!t)return p.Promise.as([]);var i=this.requestService.getPath("root",t);if(!i)return e.prototype.fetchDependencies.call(this,t);var r=this.resourceService.get(t);if(!(r instanceof v.MirrorModel))return p.Promise.as([]);var o=r,s=this.resourcesFromReferenceState(o);if(s)return p.Promise.as(s);var a=this.builtRequestUrl(t,"typeScriptDependencyGraph"),u=o.versionId,l=this.resourceService.getLinked(t,b.ReferencesState.NAME);return this.requestService.makeRequest({url:a}).then(function(e){var i=JSON.parse(e.responseText),r=[],o=n.parseGraph(i,r);return n.markerService.createPublisher().batchChanges(function(e){for(var t=0,i=r.length;i>t;t++){var o=r[t];if(1===o.referenceType){var s=new m.URL(n.requestService.getRequestUrl("root",o.path,!0)),a=C.createTextMarker(C.Severity.Error,1,o.message,o.offset,o.length);e.changeMarkers(s,function(e){e.addMarker(a)})}}}),l.setGraph(o,u),n.resourcesFromGraph(o,t)}).then(function(e){for(var t=[],i=0;i<e.length;i++)n.resourceService.contains(e[i])||t.push(n.requestService.getPath("root",e[i]));return 0===t.length?p.Promise.as(e):h.fetchChunkedData(n.requestService,{type:"POST",url:n.requestService.getRequestUrl("typeScriptFiles"),headers:{"Content-Type":"application/json"},data:JSON.stringify(t)}).then(function(){return e},function(){return e},function(e){if("undefined"==typeof e.header.IsError){var t=e.header.Path,i=new m.URL(n.requestService.getRequestUrl("root",t,!0)),r=new y.RemoteModel(i,e.body);n.resourceService.contains(i)||n.resourceService.insert(i,r)}})})},t.prototype.builtRequestUrl=function(e,t){var n=this.requestService.getPath("root",e),i=this.modules.getModuleConfiguration(e),r=f.format("{0}?type={1}&baseurl={2}",this.requestService.getRequestUrl(t,n),encodeURIComponent(i.moduleType),encodeURIComponent(i.baseurl));return this.loadRecursively()||(r+="&flat"),r},t.prototype.parseGraph=function(e,t){for(var n=this.requestService.getRequestUrl("root","",!0),i=Object.keys(e.i),r=0;r<i.length;r++)0!==e.i[i[r]].indexOf("error:")&&(e.i[i[r]]=n+e.i[i[r]].substring(1));for(var o=_.Graph.fromJSON(e),s=o.nodes(),r=0;r<s.length;r++){var a=s[r];0===a.getName().indexOf("error:")&&(o.removeNode(a.getName()),t.push(JSON.parse(a.getName().substring(6))))}return o},t.ID="typescript.graphResolver",t}(E.FileBasedResolver);t.GraphBasedResolver=w});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/javascript/javascript-worker",["require","exports","vs/nls!vs/languages/javascript/javascriptWorker2","vs/base/lib/winjs.base","vs/editor/worker/modesWorker","vs/platform/markers/markers","./lib/jsLib"],function(e,t,n,i,r,o,s){"use strict";var a=n,u=i,l=r,c=o,d=s,h={predef:["self"],asi:!0,lastsemic:!1,bitwise:!0,browser:!0,debug:!0,devel:!0,eqeqeq:!1,es5:!0,forin:!0,globalstrict:!0,jquery:!0,latedef:!1,newcap:!0,noarg:!0,node:!0,noempty:!0,nonew:!0,nonstandard:!0,proto:!0,undef:!0,scripturl:!0,strict:!1,sub:!0,supernew:!0,laxcomma:!0,smarttabs:!0,validthis:!0},p=function(e){function t(t,n){"undefined"==typeof t&&(t=d.JSHINT),"undefined"==typeof n&&(n=d.js_beautify),e.call(this),this._jsHint=t,this._jsBeautify=n}return __extends(t,e),t.prototype.configure=function(e){return this._configureOptions(e),u.Promise.as([])},t.prototype.expressionStart=function(e){for(var t=e.length-1;t>=0;t--)if("	"===e.charAt(t)||" "===e.charAt(t))return t+1;return 0},t.prototype.extractCharacterFromJsHintError=function(e,t,n){var i=0;if("Mixed spaces and tabs."===e.reason)i=e.character;else if(1===e.character)i=0;else{var r=0,o=0;for(r=0;r<t.length&&(o+="	"===t[r]?n:1,r++,!(o>=e.character-1)););i=r}return 0>i&&(i=0),i>=t.length&&(i=t.length-1),i},t.prototype.doValidate=function(e,t){var n=this,i=this.resourceService.get(e);return t.changeMarkers(i.getAssociatedResource(),function(r){for(var o=h.indent||4,s="",u=0;o>u;u+=1)s+=" ";try{n._jsHint(i.getValue(),h)}catch(l){console.error(l)}for(var d,p=n._jsHint.data().errors||[],u=0;u<p.length;u++){var f=p[u];if(null!==f){var g=Math.max(Math.min(f.line,i.getLineCount()),1),m=i.getLineContent(g),v=n.extractCharacterFromJsHintError(f,m,s.length),y=v,b=v;if(" "===m[v]||"	"===m[v]){for(;y>0&&(" "===m[y-1]||"	"===m[y-1]);)y--;for(;b<m.length-1&&(" "===m[b+1]||"	"===m[b+1]);)b++}else for(var _,E=m.split(/\b/),C=0,w=0;w<E.length;w++){var S=E[w].trim();if(S.length>0&&(_=m.indexOf(S,C),C=_+S.length-1,C>=v)){y=Math.min(v,_),b=C;break}}d={},d.startLineNumber=g,d.endLineNumber=g,d.startColumn=y+1,d.endColumn=b+2,n._isWarning(f.reason)?r.addMarker(c.createRangeTextMarker(c.Severity.Warning,-1,f.reason,d)):r.addMarker(c.createRangeTextMarker(c.Severity.Error,-1,f.reason,d))}}for(var T=n._jsHint.data().unused||[],u=0;u<T.length;u++){var k=T[u];null!==k&&(d={},d.startLineNumber=k.line,d.startColumn=n._tokenStart(i,d.startLineNumber,0),d.endLineNumber=d.startLineNumber,d.endColumn=n._tokenEnd(i,d.startLineNumber,d.startColumn),r.addMarker(c.createRangeTextMarker(c.Severity.Warning,-1,a.localize("vs_languages_javascript_javascript-worker",0,k.name),d)))}try{i.__jsHintData=n._jsHint.data(),n.triggerValidateParticipation(e,t)}finally{delete i.__jsHintData}}),u.Promise.as(null)},t.prototype._isWarning=function(e){for(var t=['Missing "use strict" statement.',"Mixed spaces and tabs.","Expected '===' and instead saw '=='.","Unnecessary semicolon.","The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.","Missing semicolon.","'hasOwnProperty' is really a bad name.","Empty block.","Expected '!==' and instead saw '!='.","Bad line breaking before","Line too long.","Use '===' to","Use '!==' to","Don't make functions within a loop.","Missing radix parameter.","A leading decimal point can be confused with","Confusing use of '!'.","Unexpected use of '|'.","Unexpected use of '&'.","Unexpected use of '>>>'.","Unexpected use of '<<<'.","Unexpected use of '>>'.","Unexpected use of '<<'.","Unescaped ","This 'switch' should be an 'if'.","Confusing plusses.","It is not necessary to initialize 'type' to 'undefined'.","Missing space","Use the object literal notation {}","Unnecessary escapement.","Use the array literal notation [].","Expected an assignment or function call and instead saw an expression.","Expected a conditional expression and instead saw an assignment.","Do not use 'new' for side effects.","A leading decimal point can be confused with a dot: .","Function declarations should not be placed in blocks.","Don't use extra leading zeros","Comma warnings can be turned off with","Unexpected escaped character ","Avoid arguments.callee.","Unexpected use of '^'."],n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1},t.prototype._configureOptions=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=h;n[t]=e[t]}},t.prototype._findUnused=function(e,t){var n=e.indexOf(t);return n>=0?n:0},t.prototype._tokenEnd=function(e,t,n){for(var i=e.getLineContent(t),r=n;r<i.length;r++){var o=i[r];if(/\W/.test(o))break}return r+1},t.prototype._tokenStart=function(e,t,n){for(var i=e.getLineContent(t),r=n;r<i.length;r++){var o=i[r];if(/\S/.test(o))break}return r+1},t.prototype.textReplace=function(e,t){return this.valueSetReplace(["true","false"],e,t)},t.prototype.getOutline=function(e){var t,n=this.resourceService.get(e);try{this._jsHint(n.getValue(),h),t=this._jsHint.data()}catch(i){console.error(i)}var r=[];if(t&&t.functions&&t.functions.length>0)for(var o=0;o<t.functions.length;o++){var s=t.functions[o],a=s.name;if(0===a.indexOf('"')&&(a=a.substr(1)),a.indexOf('"')===a.length-1&&(a=a.substr(0,a.length-1)),"anonymous"!==a){var l="";if(s.param&&s.param.length>0){var c=s.param;l=c.join(", ")}a=a+"("+l+")";var d={startLineNumber:s.line,startColumn:1,endLineNumber:s.line,endColumn:1};r.push({label:a,type:"function",range:d,children:[]})}}return u.TPromise.as(r)},t.prototype.format=function(e,t,n){var i=this.resourceService.get(e),r=i.getValueInRange(t),o=this._jsBeautify(r,{indent_size:n.insertSpaces?n.tabSize:1,indent_char:n.insertSpaces?" ":"	"});return u.Promise.as(o)},t}(l.AbstractWorkerMode);t.JSWorker=p,t.value=new p});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/typescript/typescriptWorker2",["require","exports","vs/base/lib/winjs.base","vs/base/objects","vs/base/network","vs/base/strings","vs/base/errors","vs/base/lifecycle","vs/editor/worker/modesWorker","vs/editor/core/model/mirrorModel","vs/languages/typescript/service/languageServiceAdapter","vs/languages/typescript/service/languageServiceHost2","vs/languages/typescript/resources/remoteModels","vs/languages/typescript/lib/typescriptServices","./resources/moduleConfiguration","vs/languages/typescript/resources/dependencyResolverFiles","vs/languages/typescript/resources/dependencyResolverGraph","vs/languages/typescript/resources/dependencyResolverDummy","vs/languages/typescript/resources/dependencyResolver"],function(e,t,n,i,r,o,s,a,u,l,c,d,h,p,f,g,m,v,y){"use strict";var b=n,_=i,E=r,C=o,w=s,S=a,T=u,k=l,x=c,L=d,N=h,M=p,R=f,I=g,O=m,D=v,P=y,A=function(e){function t(){e.call(this),this.shouldEmitStatus=!1,this.callOnDispose=[],this.validationId="typescript.worker.syntactic=true.semantic=true"}return __extends(t,e),t.prototype.dispose=function(){S.cAll(this.callOnDispose),this.noDependencyResolver.dispose(),this.fileDependencyResolver.dispose(),this.projectDependencyResolver.dispose()},t.prototype.injectTelemetryService=function(e){this.telemetryService=e},t.prototype.injectRequestService=function(e){this.requestService=e},t.prototype.injectResourceService=function(t){e.prototype.injectResourceService.call(this,t),this.host=new L.LanguageServiceHost,this.host.resourceService=t;var n=new M.Services.LanguageService(this.host);this.adapter=new x.LanguageServiceAdapter(this.host,n,t)},t.prototype.setExtraData=function(e){this.extraData=_.mixin(_.clone(t.defaultExtraData),e||{}),this.validationId=C.format("typescript.worker.syntactic={0}.semantic={1}",this.extraData.syntacticValidation,this.extraData.semanticValidation)},t.prototype.configure=function(e){this.delays=_.clone(t.defaultDelays),this.options=_.mixin(_.clone(t.defaultOptions),e||{}),this.options.extraBaseLibs.unshift("vs/text!vs/languages/typescript/lib/lib.d.ts");var n=new M.TypeScript.CompilationSettings;return n.codeGenTarget=M.TypeScript.LanguageVersion.EcmaScript5,n.moduleGenTarget=M.TypeScript.ModuleGenTarget.Asynchronous,this.host.compilationSettings=n,this.adapter.setSuggestConfiguration({useCodeSnippetsOnMethodSuggest:this.options.completeFunctionsAsInvocation}),this.adapter.lintConfiguration=this.options.lint,this.createDependencyResolver(),b.Promise.as(null)},t.prototype.createDependencyResolver=function(){var e=this,t=function(t){"undefined"==typeof t&&(t=!0);var n;if(e.requestService.getRequestUrl("typeScriptDependencyGraph")){var i=new R.ModuleSystemConfigurations(e.requestService,e.options.moduleSystems),r=new O.GraphBasedResolver(e.resourceService,e.requestService,e.markerService);r.setModuleSystems(i),n=r}else n=e.requestService.getRequestUrl("root")?new I.FileBasedResolver(e.resourceService,e.requestService,e.markerService):new D.DummyDependencyResolver(e.resourceService,e.markerService);return n instanceof I.FileBasedResolver&&(e.callOnDispose.push(n.addListener(P.Events.OnReferencesChanged,function(t){e.validate(t.resource)
})),n.loadRecursively(t)),n};this.noDependencyResolver=new P.NullDependencyResolver;var n=new I.BaselibDependencyResolver(this.resourceService,this.requestService,t());if(n.setBaselibs(this.options.extraBaseLibs.map(function(e){return new E.URL(e)})),this.fileDependencyResolver=new P.CompositeDependencyResolver([n,t()]),this.projectDependencyResolver=this.fileDependencyResolver,this.requestService.getRequestUrl("root")){var i=new I.ProjectFileDependencyResolver(new E.URL(this.requestService.getRequestUrl("root","all.references.ts",!0)),this.resourceService,this.requestService,t(!1));this.projectDependencyResolver=new P.CompositeDependencyResolver([this.fileDependencyResolver,i])}},t.prototype.getHost=function(){return this.host},t.prototype.fetchDependenciesAndUpdateLanguageService=function(e,t){var n=this,i=!1;return new b.Promise(function(r,o){t.fetchDependencies(e).then(function(t){return i?(o({name:"Canceled"}),void 0):(e&&t.push(e),n.host.updateResources(t),void 0)}).then(function(){try{n.doUpdateLanguageService(),r(n)}catch(e){o(e)}},o)},function(){i=!0})},t.prototype.doUpdateLanguageService=function(){if(this.currentError)throw{name:"Canceled",message:"updating language service BLOCK because current state caused errors"}},t.prototype.onError=function(e,t){var n=this;if("Canceled"!==t.name){this.telemetryService.log("typescript.languageService.update.failure",{detail:w.toErrorMessage(t,!0)}),console.error("ERROR updating language service (file a bug against TypeScript)"),console.error(t),this.currentError=t;var i;i=this.resourceService.addBulkListener(function(){i(),n.currentError=null,console.warn("creating NEW language service after last update failed");var e=new M.Services.LanguageService(n.host);n.adapter.setLanguageService(e)})}return e},t.prototype.setStatusReporting=function(e){this.shouldEmitStatus=e},t.prototype.emitStatus=function(e){this.shouldEmitStatus&&this.publisher.sendMessage("ts.statusUpdate",{status:e})},t.prototype.run=function(e,t,n,i){"undefined"==typeof i&&(i=null);var r=this;return this.emitStatus(3),this.fetchDependenciesAndUpdateLanguageService(e,t).then(function(){try{r.emitStatus(1);var e=n();return r.emitStatus(0),e}catch(t){return r.emitStatus(2),r.onError(i,t)}},function(e){return r.emitStatus(2),r.onError(i,e)})},t.prototype.doValidate=function(t,n){var i=this;this.extraData.syntacticValidation&&this.run(t,this.noDependencyResolver,function(){n.changeMarkers(t,i.validationId,function(e){var n=i.adapter.getSyntacticDiagnostics(t);n.forEach(function(t){e.addMarker(t)})})}),this.extraData.semanticValidation&&(this.run(t,this.fileDependencyResolver,function(){n.changeMarkers(t,i.validationId,function(e){var n=i.adapter.getSemanticDiagnostics(t);n.forEach(function(t){e.addMarker(t)})})}),this.run(t,this.noDependencyResolver,function(){n.changeMarkers(t,function(e){var n=i.adapter.getExtraDiagnostic(t);n.forEach(function(t){e.addMarker(t)})})})),"undefined"!=typeof this.fullCheckHandle&&clearTimeout(this.fullCheckHandle),this.fullCheckHandle=setTimeout(function(){e.prototype.triggerValidateParticipation.call(i,t,n,i.adapter.getLanguageSerivce()),i.resourceService.all().filter(function(e){return e instanceof k.MirrorModel?e instanceof N.RemoteModel?!1:!0:!1}).map(function(e){return e.getAssociatedResource()}).forEach(function(e){if(i.host.isScriptFileName(e.toExternal())&&e.toExternal()!==t.toExternal()){var r=i.extraData.syntacticValidation?i.adapter.getSyntacticDiagnostics(e):[],o=i.extraData.semanticValidation?i.adapter.getSemanticDiagnostics(e):[];n.changeMarkers(e,i.validationId,function(e){r.forEach(function(t){e.addMarker(t)}),o.forEach(function(t){e.addMarker(t)})})}})},0)},t.prototype.doSuggest=function(e,t){var n=this;return this.run(e,this.fileDependencyResolver,function(){return n.adapter.suggest(e,t)},[])},t.prototype.getSuggestionDetails=function(e,t,n){var i=this;return this.run(e,this.fileDependencyResolver,function(){return i.adapter.getSuggestionDetails(e,t,n)},n)},t.prototype.quickFix=function(e,t){var n=this;return this.run(e,this.fileDependencyResolver,function(){return n.adapter.quickFix(e,t)},[])},t.prototype.getParameterHints=function(e,t){var n=this;return this.run(e,this.fileDependencyResolver,function(){return n.adapter.getParameterHints(e,t)})},t.prototype.getEmitOutput=function(e,t){var n=this;return this.run(e,this.noDependencyResolver,function(){return n.adapter.getEmitOutput(e,t)})},t.prototype.format=function(e,t,n){var i=this;return this.run(e,this.noDependencyResolver,function(){return i.adapter.format(e,t,n)},"")},t.prototype.formatAfterKeystroke=function(e,t,n){var i=this;return this.run(e,this.noDependencyResolver,function(){return i.adapter.formatAfterKeystroke(e,t,n)},null)},t.prototype.getActionsAtPosition=function(e,t){var n=this;return this.run(e,this.noDependencyResolver,function(){return n.adapter.getActionsAtPosition(e,t)},[])},t.prototype.getOutline=function(e){var t=this;return this.run(e,this.fileDependencyResolver,function(){return t.adapter.getOutline(e)},[])},t.prototype.getNavigateToItems=function(e){var t=this;return this.run(null,this.noDependencyResolver,function(){return t.adapter.getNavigateToItems(e)},[])},t.prototype.findOccurrences=function(e,t,n){var i=this;return this.run(e,this.fileDependencyResolver,function(){return i.adapter.findOccurrences(e,t,n)},[])},t.prototype.findDeclaration=function(e,t){var n=this;return this.run(e,this.fileDependencyResolver,function(){return n.adapter.findDeclaration(e,t)})},t.prototype.findTypeDeclaration=function(e,t){var n=this;return this.run(e,this.fileDependencyResolver,function(){return n.adapter.findTypeDeclaration(e,t)})},t.prototype.findReferences=function(e,t){var n=this,i=!0;return this.run(e,this.fileDependencyResolver,function(){return i=n.adapter.isExternallyVisibleSymbole(e,t),[]},[]).then(function(){var r=i?n.projectDependencyResolver:n.fileDependencyResolver;return n.run(e,r,function(){return n.adapter.findReferences(e,t)},[])})},t.prototype.computeInfo=function(e,t){var n=this;return this.run(e,this.fileDependencyResolver,function(){return n.adapter.getTypeInformationAtPosition(e,t)})},t.prototype.getRangesToPosition=function(e,t){var n=this;return this.run(e,this.noDependencyResolver,function(){return n.adapter.getRangesToPosition(e,t)},[])},t.prototype.textReplace=function(e,t){var n=[["true","false"],["string","number","boolean"],["private","public"]];return this.valueSetsReplace(n,e,t)},t.defaultOptions={lint:{},moduleSystems:{"/":{type:"commonjs"}},extraBaseLibs:[],showTypeScriptWarnings:!1,completeFunctionsAsInvocation:!1},t.defaultExtraData={resolveDependencies:!0,syntacticValidation:!1,semanticValidation:!0},t.defaultDelays={updateSoon:500,validateSoon:500},t}(T.AbstractWorkerMode);t.TypeScriptWorker2=A,t.value=new A});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/javascript/javascriptWorker2",["require","exports","vs/base/async","vs/base/lib/winjs.base","vs/languages/javascript/javascript-worker","vs/languages/typescript/typescriptWorker2","vs/editor/worker/modesWorker"],function(e,t,n,i,r,o,s){"use strict";var a=n,u=i,l=r,c=o,d=s,h=function(t){function n(){t.call(this),this.nodeValidationEnabled=!1,this.typescriptBaseLibsPaths=[]}return __extends(n,t),n.prototype.injectRequestService=function(e){this.requestService=e},n.prototype.injectTelemetryService=function(e){this.telemetryService=e},n.prototype.initializeDelegates=function(){this.jsDelegate=new l.JSWorker,this.jsDelegate.injectResourceService(this.resourceService),this.jsDelegate.injectPublisherService(this.publisher),this.jsDelegate.injectMarkerService(this.markerService),this.typescriptDelegate=this.createTypeScriptWorker(),this.typescriptDelegate.injectResourceService(this.resourceService),this.typescriptDelegate.injectPublisherService(this.publisher),this.typescriptDelegate.injectRequestService(this.requestService),this.typescriptDelegate.injectTelemetryService(this.telemetryService),this.typescriptDelegate.injectMarkerService(this.markerService),this.typescriptDelegate.setExtraData({resolveDependencies:!1,semanticValidation:!1,syntacticValidation:!1})},n.prototype.createTypeScriptWorker=function(){return new c.TypeScriptWorker2},n.prototype.addWorkerParticipant=function(e){"function"==typeof e.validate&&this.jsDelegate.addWorkerParticipant(e),"function"==typeof e.suggest&&t.prototype.addWorkerParticipant.call(this,e)},n.prototype.configure=function(t){var n="extraBaseLibs";if(t&&t.hasOwnProperty(n)){var i=t[n];this.typescriptBaseLibsPaths=i.map(function(t){return e.toUrl(t)}),delete t[n]}return t&&t.hasOwnProperty("node")&&(this.nodeValidationEnabled=t.node===!0),this.initializeDelegates(),u.Promise.join([this.jsDelegate.configure(t),this.typescriptDelegate.configure({lint:{},useCodeSnippetsOnMethodSuggest:!1,updateOnResourceChange:!1,showTypeScriptWarnings:!1,extraBaseLibs:this.typescriptBaseLibsPaths})])},n.prototype.doValidate=function(e,t){return this.jsDelegate.doValidate(e,t)},n.prototype.findOccurrences=function(e,t,n){var i=this;return this.typescriptDelegate.findOccurrences(e,t,n).then(function(r){var o;return o=n||r.length>1?u.TPromise.as(r):i.jsDelegate.findOccurrences(e,t)})},n.prototype.doSuggest=function(e,t){var n=this,i=this.resourceService.get(e),r=null;this.isNode()&&(r=this.patchLines(i));var o=this.typescriptDelegate.doSuggest(e,t);return a.always(o,function(){r&&n.restoreLines(i,r)})},n.prototype.getParameterHints=function(e,t){var n=this,i=this.resourceService.get(e),r=null;this.isNode()&&(r=this.patchLines(i));var o=this.typescriptDelegate.getParameterHints(e,t);return a.always(o,function(){r&&n.restoreLines(i,r)})},n.prototype.isNode=function(){var e=this.typescriptBaseLibsPaths.some(function(e){return-1!==e.indexOf("node.d.ts")});return e||this.nodeValidationEnabled},n.prototype.patchLines=function(e){for(var t=e.lines,n={},i=0;i<t.length;i++){var r=t[i];if(-1!==r.indexOf("require")){var o=new f(r),s=o.parse();if(s.length>0){var a=p.asImportStatements(s);n[i]=r,t[i]=a}}}return e.version+=1,n},n.prototype.restoreLines=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.lines[n]=t[n]);e.version+=1},n.prototype.findDeclaration=function(e,t){return this.typescriptDelegate.findDeclaration(e,t)},n.prototype.findReferences=function(e,t){return this.typescriptDelegate.findReferences(e,t)},n.prototype.computeInfo=function(e,t){return this.typescriptDelegate.computeInfo(e,t)},n.prototype.getRangesToPosition=function(e,t){return this.typescriptDelegate.getRangesToPosition(e,t)},n.prototype.getActionsAtPosition=function(e,t){return this.typescriptDelegate.getActionsAtPosition(e,t)},n.prototype.getOutline=function(e){return this.jsDelegate.getOutline(e)},n.prototype.format=function(e,t,n){return this.jsDelegate.format(e,t,n)},n.prototype.navigateValueSet=function(e,t,n){return this.jsDelegate.navigateValueSet(e,t,n)},n}(d.AbstractWorkerMode);t.JSWorker2=h;var p=function(){function e(e,t){this.variableName=e,this.moduleName=t,this.exportName=null}return e.prototype.addExport=function(e){this.exportName=null===this.exportName?e:this.exportName+"."+e},e.prototype.asImportStatement=function(){return null!==this.exportName?"import "+this.tempModuleVar(this.moduleName)+" = module("+this.moduleName+");"+" var "+this.variableName+" = "+this.tempModuleVar(this.moduleName)+"."+this.exportName+";":"import "+this.variableName+" = module("+this.moduleName+");"},e.prototype.tempModuleVar=function(e){return"__module__"+this.baseName(e)},e.prototype.baseName=function(e){return e.substring(1,e.length-1)},e.asImportStatements=function(e){for(var t="",n=0;n<e.length;n++){var i=e[n];t+=i.asImportStatement()}return t},e}();t.RequireModule=p;var f=function(){function e(e){this.input=e}return e.prototype.eat=function(e){var t,n=e.exec(this.input);return n&&(t=n[0].length)>0?(this.skipTo(t),n[0]):null},e.prototype.skipTo=function(e){this.input=this.input.substring(e)},e.prototype.peek=function(){return this.input[0]},e.prototype.atEnd=function(){return 0===this.input.length},e.prototype.scanString=function(){var e,t=this.peek(),n=null;if('"'===t||"'"===t){e=t;for(var i=this.input.length,r=1;i>r&&this.input[r]!==e;r++);this.input[r]===e&&(r++,n=this.input.substring(0,r),this.skipTo(r))}return n},e.prototype.parse=function(){var e=[];return this.parseRequireStatement(e),e},e.prototype.parseRequireStatement=function(t){this.eat(e.whitespace),","===this.peek()?(this.skipTo(1),this.parseRequireExpressionList(t)):this.eat(e.var)?this.parseRequireExpressionList(t):this.parseRequireExpressionList(t)},e.prototype.parseRequireExpressionList=function(t){for(;;){this.parseRequireExpression(t),this.eat(e.whitespace);var n=this.peek();if("."===n&&this.parseExport(t),","!==n)break;this.skipTo(1)}return this.eat(e.whitespace),this.atEnd()||null!==this.eat(/;/)?void 0:(t.length=0,void 0)},e.prototype.parseExport=function(t){this.eat(/\./),this.eat(e.whitespace);var n=this.eat(e.ident);for(t[t.length-1].addExport(n);;){this.eat(e.whitespace);var i=this.peek();if("."!==i)break;this.eat(/\./);var n=this.eat(e.ident);t[t.length-1].addExport(n)}},e.prototype.parseRequireExpression=function(t){this.eat(e.whitespace);var n=this.eat(e.ident);if(n){if(this.eat(e.whitespace),null===this.eat(/=/))return;if(this.eat(e.whitespace),null===this.eat(e.req))return;if(this.eat(e.whitespace),null===this.eat(/\(/))return;this.eat(e.whitespace);var i=this.scanString();if(null===this.eat(/\)/))return;i&&t.push(new p(n,i))}},e.ident=/^\-?[_a-zA-Z][_\-a-zA-Z0-9]*/,e.whitespace=/^\s*/,e.var=/var/,e.req=/require/,e}();t.RequireParser=f,t.value=new h});