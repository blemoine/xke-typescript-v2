/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/vsxml/vsxml",["require","exports","vs/base/objects","vs/base/errors","vs/editor/modes/modesExtensions"],function(e,t,n,i,r){"use strict";var o=n,s=i,a=r,u='<>"=/',l="	 ",c=o.createKeywordMatcher(["summary","reference","returns","param","loc"]),d=o.createKeywordMatcher(["type","path","name","locid","filename","format","optional"]),h=o.createKeywordMatcher(u.split("")),p=function(e){function t(t,n,i){e.call(this,t),this.state=n,this.parentState=i}return __extends(t,e),t.prototype.getParentState=function(){return this.parentState},t.prototype.makeClone=function(){return new t(this.getMode(),null===this.state?null:this.state.clone(),null===this.parentState?null:this.parentState.clone())},t.prototype.equals=function(n){if(!e.prototype.equals.call(this,n))return!1;if(!(n instanceof t))return!1;var i=n;return null===this.state&&null===i.state?!0:null===this.state||null===i.state?!1:null===this.parentState&&null===i.parentState?!0:null===this.parentState||null===i.parentState?!1:this.state.equals(i.state)&&this.parentState.equals(i.parentState)},t.prototype.setState=function(e){this.state=e},t.prototype.postTokenize=function(e){return e},t.prototype.tokenize=function(e){var t=this.state.tokenize(e);return void 0!==t.nextState&&this.setState(t.nextState),t.nextState=this,this.postTokenize(t,e)},t}(a.AbstractState);t.EmbeddedState=p;var f=function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.setState=function(t){e.prototype.setState.call(this,t),this.getParentState().setVSXMLState(t)},t.prototype.postTokenize=function(e,t){return t.eos()&&(e.nextState=this.getParentState()),e},t}(p);t.VSXMLEmbeddedState=f;var g=function(e){function t(t,n,i,r){"undefined"==typeof r&&(r=""),e.call(this,t),this.name=n,this.parent=i,this.whitespaceTokenType=r}return __extends(t,e),t.prototype.equals=function(n){return e.prototype.equals.call(this,n)?n instanceof t&&this.getMode()===n.getMode()&&this.name===n.name&&(null===this.parent&&null===n.parent||null!==this.parent&&this.parent.equals(n.parent)):!1},t.prototype.tokenize=function(e){return e.setTokenRules(u,l),e.skipWhitespace().length>0?{type:this.whitespaceTokenType}:this.stateTokenize(e)},t.prototype.stateTokenize=function(){throw s.notImplemented()},t}(a.AbstractState);t.VSXMLState=g;var m=function(e){function t(t,n){e.call(this,t,"string",n,"attribute.value.vs")}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null)},t.prototype.stateTokenize=function(e){for(;!e.eos();){var t=e.nextToken();if('"'===t)return{type:"attribute.value.vs",nextState:this.parent}}return{type:"attribute.value.vs",nextState:this.parent}},t}(g);t.VSXMLString=m;var v=function(e){function t(t,n){e.call(this,t,"expression",n,"vs")}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null)},t.prototype.stateTokenize=function(e){var t=e.nextToken(),n=this.whitespaceTokenType;return">"===t?{type:"delimiter.vs",nextState:this.parent}:'"'===t?{type:"attribute.value.vs",nextState:new m(this.getMode(),this)}:(c(t)?n="tag.vs":d(t)?n="attribute.name.vs":h(t)&&(n="delimiter.vs"),{type:n,nextState:this})},t}(g);t.VSXMLTag=v;var y=function(e){function t(t,n){e.call(this,t,"expression",n,"vs")}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null)},t.prototype.stateTokenize=function(e){var t=e.nextToken();return"<"===t?{type:"delimiter.vs",nextState:new v(this.getMode(),this)}:{type:this.whitespaceTokenType,nextState:this}},t}(g);t.VSXMLExpression=y}),define("vs/languages/javascript/jsdoc",["require","exports","vs/editor/modes/modes","vs/base/strings","vs/base/arrays"],function(e,t,n,i,r){"use strict";function o(e,t,n){var i=e[n];if("*"!==i)return null;if(e.indexOf("*/",n)>-1)return null;for(var r=null,o=0;o<t.length;o++){var s=t[o];if(s.startIndex>n)break;r=s}return r?u.startsWith(s.type,"comment.doc")?"/*"!==e.substring(r.startIndex,n)?null:{appendText:"*/"}:null:null}function s(e,t,n){var i,r,o=l.findIndexInSegmentsArray(t,n),s=t[o];return s?u.startsWith(s.type,"comment.doc")?(i=e.indexOf("/**"),r=e.indexOf("*/"),-1===i&&-1===r?{indentAction:a.IndentAction.None,appendText:"* "}:-1!==i&&n>=i+3&&-1!==r&&r>=n?{indentAction:a.IndentAction.IndentOutdent,appendText:" * ",indentOutdentAppendText:" "}:-1!==i&&n>=i+3?{indentAction:a.IndentAction.None,appendText:" * "}:null):null:null}var a=n,u=i,l=r;t.onElectricCharacter=o,t.onEnter=s});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("vs/languages/javascript/javascript",["require","exports","vs/base/lib/winjs.base","vs/editor/modes/autoIndentation/autoIndentation","vs/base/objects","vs/editor/modes/modes","vs/editor/modes/modesExtensions","vs/base/env","vs/languages/vsxml/vsxml","./jsdoc","vs/base/arrays"],function(e,t,n,i,r,o,s,a,u,l,c){"use strict";var d=n,h=i,p=r,f=o,g=s,m=a,v=u,y=l,b=c,_="+-*%&|^~!=<>/?;:.,",C="+-*/%&|^~!=<>(){}[]\"'\\/?;:.,",w="	 ",E=new h.Brackets([{tokenType:"delimiter.bracket.js",open:"{",close:"}",isElectric:!0},{tokenType:"delimiter.array.js",open:"[",close:"]",isElectric:!0},{tokenType:"delimiter.parenthesis.js",open:"(",close:")",isElectric:!0}]),S=p.createKeywordMatcher(["abstract","boolean","byte","catch","char","class","const","debugger","default","delete","double","enum","extends","false","final","finally","float","for","function","goto","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","protected","short","static","super","synchronized","this","throws","transient","true","try","typeof","var","void","volatile","with"]),T=p.createKeywordMatcher(["if","else","switch","case","while","do","break","continue","throw","return"]),k=p.createKeywordMatcher(["export","public","private"]),x=function(e){return _.indexOf(e)>-1},L=function(e){function t(t,n,i){e.call(this,t),this.name=n,this.parent=i}return __extends(t,e),t.prototype.equals=function(n){if(!e.prototype.equals.call(this,n))return!1;var i=n;return n instanceof t&&this.getMode()===i.getMode()&&this.name===i.name&&(null===this.parent&&null===i.parent||null!==this.parent&&this.parent.equals(i.parent))},t.prototype.tokenize=function(e){return e.setTokenRules(C,w),e.skipWhitespace().length>0?{type:""}:this.stateTokenize(e)},t.prototype.stateTokenize=function(){throw new Error("To be implemented")},t}(g.AbstractState);t.JSState=L;var N=function(e){function t(t,n,i){e.call(this,t,"string",n),this.isAtBeginning=!0,this.delimiter=i}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null,this.delimiter)},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.delimiter===t.delimiter},t.prototype.tokenize=function(e){var t=this.isAtBeginning?1:0;for(this.isAtBeginning=!1;!e.eos();){var n=e.next();if("\\"===n)return 0===t?e.eos()?{type:"string.escape.js"}:(e.next(),e.eos()?{type:"string.escape.js",nextState:this.parent}:{type:"string.escape.js"}):(e.goBack(1),{type:"string.js"});if(n===this.delimiter)break;t+=1}return{type:"string.js",nextState:this.parent}},t}(L);t.JSString=N;var M=function(e){function t(t,n,i){e.call(this,t,"regexp",n),this.previous=i}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null,this.previous)},t.prototype.tokenize=function(e){if(-1!==["","bracket.open","delimiter"].indexOf(this.previous)){for(var t,n=e.pos();!e.eos();){if(t=e.next(),"/"===t)return{type:"regexp.js",nextState:this.parent};"\\"!==t||e.eos()||"/"!==e.peek()?"\\"!==t||e.eos()||"\\"!==e.peek()||e.next():e.next()}e.goBack(e.pos()-n)}return{type:"delimiter.js",nextState:this.parent}},t}(L);t.JSRegExp=M;var I=function(e){function t(t,n,i){e.call(this,t,"number",n),this.firstDigit=i}return __extends(t,e),t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null,this.firstDigit)},t.prototype.tokenize=function(e){var t=this.firstDigit,n=10,i=!1,r=!1;if("0"===t&&!e.eos()){if(t=e.peek(),"x"===t.toLowerCase())n=16;else if("."===t)n=10;else{if(!g.isDigit(t,8))return{type:"number.js",nextState:this.parent};n=8}e.next()}for(;!e.eos();)if(t=e.peek(),g.isDigit(t,n))e.next();else if(10===n)if("."!==t||r||i){if("e"!==t||r)break;r=!0,e.next(),e.eos()||"-"!==e.peek()||e.next()}else i=!0,e.next();else{if(8!==n||!g.isDigit(t,10))break;n=10,e.next()}var o="number";return 16===n?o+=".hex":8===n&&(o+=".octal"),{type:o+".js",nextState:this.parent}},t}(L);t.JSNumber=I;var R=function(e){function t(t,n,i){e.call(this,t,"comment",n),this.tokenType=i}return __extends(t,e),t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.tokenType===t.tokenType},t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null,this.tokenType)},t.prototype.tokenize=function(e){for(;!e.eos();){var t=e.next();if("*"===t&&!e.eos()&&!e.peekWhitespace()&&"/"===e.peek())return e.next(),{type:this.tokenType,nextState:this.parent}}return{type:this.tokenType}},t}(L);t.JSComment=R;var D=function(e){function t(t,n,i,r){e.call(this,t,"expression",n),this.previous=i,this.previousDelimiter=r}return __extends(t,e),t.prototype.equals=function(n){if(!e.prototype.equals.call(this,n))return!1;var i=n;return n instanceof t&&this.getMode()===i.getMode()&&this.previous===i.previous&&this.previousDelimiter===i.previousDelimiter},t.prototype.makeClone=function(){return new t(this.getMode(),this.parent?this.parent.clone():null,this.previous,this.previousDelimiter)},t.prototype.stateTokenize=function(e){if(g.isDigit(e.peek(),10))return this.previous="number",{nextState:new I(this.getMode(),this,e.next())};var t=e.nextToken();if("/"===t)return e.advanceIfString("**/")?{type:"comment.js"}:e.advanceIfString("**")?{nextState:new R(this.getMode(),this,"comment.doc.js")}:e.advanceIfString("*")?{nextState:new R(this.getMode(),this,"comment.js")}:e.advanceIfString("/")?(e.advanceToEOS(),{type:"comment.js"}):{nextState:new M(this.getMode(),this,this.previous)};if('"'===t||"'"===t)return this.previous="string",{nextState:new N(this.getMode(),this,t)};if(E.characterIsBracket(t)){var n=E.bracketTypeFromChar(t);return this.previous=n===f.Bracket.Open?"bracket.open":"bracket.close",this.previousDelimiter=t,{bracket:n,type:E.tokenTypeFromChar(t)}}return x(t)?(this.previous="delimiter",this.previousDelimiter=t,{type:"delimiter.js"}):("delimiter"===this.previous&&","===this.previousDelimiter||"bracket.open"===this.previous&&"{"===this.previousDelimiter)&&!e.eos()&&":"===e.peekToken()?(this.previous="key",{type:"key.js"}):T(t)?(this.previous="keyword",{type:"keyword.flow.js"}):k(t)?(this.previous="keyword",{type:"keyword.visibility.js"}):S(t)?(this.previous="keyword",{type:"keyword.js"}):(this.previous="identitifer",{type:""})},t}(L);t.JSStatement=D;var O=function(){function e(e){this.mode=e}return e.prototype.findDeclaration=function(e,t){return this.mode.request("findDeclaration",null,e,t)},e.prototype.findReferences=function(e,t){return this.mode.request("findReferences",null,e,t)},e.prototype.getActionsAtPosition=function(e,t){return this.mode.request("getActionsAtPosition",null,e,t)},e.prototype.computeInfo=function(e,t){return this.mode.request("computeInfo",null,e,t)},e.prototype.getRangesToPosition=function(e,t){return this.mode.request("getRangesToPosition",null,e,t)},e.prototype.getParameterHints=function(e,t){return this.mode.request("getParameterHints",null,e,t)},e.prototype.getParameterHintsTriggerCharacters=function(){return["(",","]},e}(),P=function(e){function t(){var t=!m.browser.hasWorkers;e.call(this,"vs.languages.javascript",t?"vs/languages/javascript/javascriptWorker2Monitored":"vs/languages/javascript/javascriptWorker2");var n=new O(this);this.inEditorActionsSupport=n,this.declarationSupport=n,this.referenceSupport=n,this.extraInfoSupport=n,this.logicalSelectionSupport=n,this.parameterHintsSupport=n,this.outlineSupport=this}return __extends(t,e),t.prototype.getInitialState=function(){return new D(this,null,"","")},t.prototype.getNonWordTokenTypes=function(){return["delimiter.js","delimiter.parenthesis.js","delimiter.bracket.js","delimiter.array.js","regexp.js"]},t.prototype.getElectricCharacters=function(){return["*"].concat(E.getElectricBrackets())},t.prototype.getAutoClosingPairs=function(){return[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},t.prototype.shouldAutoClosePairImpl=function(e,t,n,i){for(var r=null,o=0;o<n.length;o++){var s=n[o];if(s.startIndex>i)break;r=s}return!r||"string.js"!==r.type},t.prototype.onEnterImpl=function(e,t,n){var i=y.onEnter(e,t,n);return i?i:E.onEnter(e,t,n)},t.prototype.onElectricCharacterImpl=function(e,t,n){return y.onElectricCharacter(e,t,n)||E.onElectricCharacter(e,t,n)},t.prototype.getCommentsConfiguration=function(){return{lineCommentTokens:["//"],blockCommentStartToken:"/*",blockCommentEndToken:"*/"}},t.prototype.configure=function(t){var n=this;return e.prototype.configure.call(this,t).then(function(){var e=[],t=n._models();return Object.keys(t).forEach(function(i){var r=t[i];e.push(n.validate(r.getAssociatedResource()))}),d.Promise.join(e)})},t.prototype.getTriggerCharacters=function(){return["."]},t.prototype.shouldAutotriggerSuggestImpl=function(e,t,n){if(0===t.length)return!1;var i=b.findIndexInSegmentsArray(t,n-1),r=t[i].type;return r.indexOf("string")>=0||r.indexOf("comment")>=0||r.indexOf("number")>=0?!1:!0},t.prototype.getOutline=function(e){return this.request("getOutline",null,e)},t}(g.AbstractMode);t.JSMode=P;var A=function(e){function t(t,n,i,r,o){e.call(this,t,i,r,o),this.vsState=n}return __extends(t,e),t.prototype.setVSXMLState=function(e){this.vsState=e},t.prototype.makeClone=function(){return new t(this.getMode(),null!==this.vsState?this.vsState.clone():null,this.parent?this.parent.clone():null,this.previous,this.previousDelimiter)},t.prototype.equals=function(n){return e.prototype.equals.call(this,n)&&n instanceof t&&(null===this.vsState&&null===n.vsState||null!==this.vsState&&this.vsState.equals(n.vsState))},t.prototype.stateTokenize=function(t){return t.advanceIfString("///").length>0?t.eos()?{type:"comment.vs"}:"/"===t.peek()?(t.advanceToEOS(),{type:"comment.js"}):{type:"comment.vs",nextState:new v.VSXMLEmbeddedState(this.getMode(),this.vsState,this)}:e.prototype.stateTokenize.call(this,t)},t}(D);t.JSVSStatement=A;var W=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getInitialState=function(){return new A(this,new v.VSXMLExpression(this,null),null,"","")},t}(P);t.JSVSMode=W});